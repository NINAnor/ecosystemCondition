<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 1 Insect indicators | Template for indicator documentation</title>

  
   
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 1 Insect indicators | Template for indicator documentation" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Insect indicators | Template for indicator documentation" />
  
  
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.2/transition.js"></script>
    <script src="libs/bs3compat-0.4.2/tabs.js"></script>
    <script src="libs/bs3compat-0.4.2/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Template for indicator documentation</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="insect-indicators" class="section level1" number="1">
<h1><span class="header-section-number">Chapter 1</span> Insect indicators</h1>
<p><br /></p>
<p><em>Author and date:</em>
Jens Åström</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2023-07-05&quot;</code></pre>
<p><br /></p>
<p>#Notes on this draft
Most things are done but it’s still a rough draft. I plan to finish it in august. But you could see where it’s headed so raise the alarm if I’m off course.</p>
<p>Incomplete list of things that will change:</p>
<ul>
<li>Fill in sections that lack text.</li>
<li>Upgrade genetic diversity calculation. The current calculation is just a placeholder, awaiting some new data from Marie.</li>
<li>Packaging of R-package versions for reproducibility? Or just point to a version on Github..</li>
<li>Make bombLepiSurv public. After touch-up and fixes of github issues.</li>
<li>Fix any comments in this draft inside hard brackets.</li>
<li>Write something about the choice of each indicator.</li>
</ul>
<!-- Load all you dependencies here -->
<!-- Fill in which ecosystem the indicator belongs to, as well as the ecosystem characteristic it should be linked to. It's OK to use some Norwegian here -->
<table>
<thead>
<tr>
<th style="text-align:left;">
Ecosystem
</th>
<th style="text-align:left;">
Økologisk egenskap
</th>
<th style="text-align:left;">
ECT class
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Semi-naturlig mark
</td>
<td style="text-align:left;">
Biologisk mangfold, Funksjonelle grupper innen trofiske nivåer, Funksjonelt viktige arter og biofysiske strukturer
</td>
<td style="text-align:left;">
Functional state characteristics
</td>
</tr>
<tr>
<td style="text-align:left;">
Semi-naturlig mark
</td>
<td style="text-align:left;">
Biologisk mangfold, Funksjonelle grupper innen trofiske nivåer, Funksjonelt viktige arter og biofysiske strukturer
</td>
<td style="text-align:left;">
Functional state characteristics
</td>
</tr>
<tr>
<td style="text-align:left;">
Semi-naturlig mark
</td>
<td style="text-align:left;">
Biologisk mangfold, Funksjonelle grupper innen trofiske nivåer, Funksjonelt viktige arter og biofysiske strukturer
</td>
<td style="text-align:left;">
Functional state characteristics
</td>
</tr>
</tbody>
</table>
<!-- Don't remove these three html lines -->
<br />
<br />
<hr />
<!-- Document you work below. Try not to change  the headers too much. Data can be stored on NINA server. Since the book is rendered on the R Server this works fine, but note that directory paths are different on the server compared to you local machine. If it is not too big you may store under /data/ on this repository -->
<div id="introduction" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Introduction</h2>
<p>We here show how to calculate a set of indicators for terrestrial insects in Norway. Two of them are adapted from earlier work on the Nature Index for Norway and use data from the Norwegian monitoring program on bumblebees and butterflies (<strong>NMBB</strong>). The others are developed during 2023, and use data from the Norwegian insect monitoring program (<strong>NorIns</strong>).</p>
<p>This workflow is shortened by putting most of the underlying code in separate R-packages, which are freely available through Github. The relevant packages are <code>bombLepiSurv</code> <a href="https://github.com/jenast/bombLepiSurv" class="uri">https://github.com/jenast/bombLepiSurv</a> for the bumblebee and butterfly indicators (<strong>Not public yet</strong>), and <code>Norimon</code> <a href="https://github.com/jenast/Norimon" class="uri">https://github.com/jenast/Norimon</a> for the rest of the indicators.</p>
<p>For the indicators from the NMBB program, community reference values has been elicitated from experts, and is explained further below. For the indicators from the NorIns program, this is significantly harder to do, because of the size of the communities, lack of historical timeseries and changes in sampling and identification techniques. We therefore currently lack reference values for many of these indicators.</p>
<p>Below is a list of the indicators calculated in this document, and their state of development. Some details is further expanded on below.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
Dataset
</th>
<th style="text-align:left;">
Indicator
</th>
<th style="text-align:left;">
Current geographical scope
</th>
<th style="text-align:left;">
Indicator data
</th>
<th style="text-align:left;">
Reference values
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NMBB
</td>
<td style="text-align:left;">
Bumblebees in semi-natural grasslands
</td>
<td style="text-align:left;">
Sørlandet, Østfold-Vestfold, Vestlandet, Trøndelag
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Present
</td>
</tr>
<tr>
<td style="text-align:left;">
NMBB
</td>
<td style="text-align:left;">
Butterflies in semi-natural grasslands
</td>
<td style="text-align:left;">
Sørlandet, Østfold-Vestfold, Vestlandet, Trøndelag
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Present
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Biomass of flying insects
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Species richness of flying insects
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Species richness of pollinators
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Species richness of X
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Species richness Apocrita / Symphyta
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
<tr>
<td style="text-align:left;">
NorIns
</td>
<td style="text-align:left;">
Intraspesific genetic variation
</td>
<td style="text-align:left;">
Sørlandet, Østlandet, Trøndelag, Nord-Norge
</td>
<td style="text-align:left;">
Present
</td>
<td style="text-align:left;">
Lacking
</td>
</tr>
</tbody>
</table>
<p>[Add short motivation for each indicator]</p>
</div>
<div id="about-the-underlying-data" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> About the underlying data</h2>
<!-- Text here -->
<div id="representativity-in-time-and-space" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Representativity in time and space</h3>
<!-- Text here -->
</div>
<div id="original-units" class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Original units</h3>
<!-- Text here -->
</div>
<div id="temporal-coverage" class="section level3" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Temporal coverage</h3>
<!-- Text here -->
</div>
<div id="aditional-comments-about-the-dataset" class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Aditional comments about the dataset</h3>
<!-- Text here -->
</div>
</div>
<div id="ecosystem-characteristic" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Ecosystem characteristic</h2>
<div id="norwegian-standard" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Norwegian standard</h3>
<!-- Text here -->
</div>
</div>
<div id="collinearities-with-other-indicators" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Collinearities with other indicators</h2>
<p>None measured so far, but it is reasonable to assume that some of these indicators will share some causal relationships with eachother, and therefore correlate to some degree. This could potentially happen with some other indicators not described here.</p>
</div>
<div id="reference-state-and-values" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Reference state and values</h2>
<p>Assessing the state of insect communities can be a complicated task, due to their taxonomic and functional breadth and high temporal and spatial variability. Still, the most complicated part for an indicator is to establishing reference values, when the reference states are lacking or prohibitively difficult to measure empirically. We currently lack reference values for all indicators from the <strong>NorIns</strong> program. It is unlikely that this can be solved “simply” by surveying a state in a reference area, since intact reference areas of sufficient size and numbers likely don’t exist. The question of how to handle these reference values is currently unresolved, and we present these indicator value calculations with made up reference values as placeholders in the code.</p>
<div id="reference-state" class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Reference state</h3>
<!-- Text here -->
</div>
<div id="reference-values-thresholds-for-defining-good-ecological-condition-minimum-andor-maximum-values" class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Reference values, thresholds for defining <em>good ecological condition</em>, minimum and/or maximum values</h3>
<!-- Text here -->
</div>
</div>
<div id="uncertainties" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> Uncertainties</h2>
<p>The uncertainties for the indicator values is calculated by bootstrapping the average values for each locality within a year. This takes the variability between the localities into account.</p>
</div>
<div id="references" class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> References</h2>
<ul>
<li><p>Åström, Jens; Birkemoe, Tone; Brandsegg, Hege; Dahle, Sondre; Davey, Marie Louise; Ekrem, Torbjørn; Fossøy, Frode; Hanssen, Oddvar; Laugsand, Arne Endre; Majaneva, Markus; Staverløkk, Arnstein; Sverdrup-Thygeson, Anne; Ødegaard, Frode.
Insektovervåking på Østlandet, Sørlandet og i Trøndelag. Rapport fra feltsesong 2022. Trondheim: Norsk institutt for naturforskning (NINA) 2023 (ISBN 978‐82‐426‐5037‐5) 99 s. NINA rapport(2241)</p></li>
<li><p>Åström, Sandra Charlotte Helene; Åström, Jens; Bøhn, Kristoffer; Gjershaug, Jan Ove; Staverløkk, Arnstein; Dahle, Sondre; Ødegaard, Frode. Nasjonal overvåking av dagsommerfugler og humler i Norge. Oppsummering av aktiviteten i 2022. Trondheim: Norsk institutt for naturforskning (NINA) 2023 (ISBN 978-82-426-5009-2) 54 s. NINA rapport(2214)</p></li>
<li><p>Connor M French, Laura D Bertola, Ana C Carnaval, Evan P Economo, Jamie M Kass, David J Lohman, Katharine A Marske, Rudolf Meier, Isaac Overcast, Andrew J. Rominger, Phillip Staniczenko, Michael J Hickerson. 2023. Global determinants of insect mitochondrial genetic diversity. <a href="https://doi.org/10.1101/2022.02.09.479762" class="uri">https://doi.org/10.1101/2022.02.09.479762</a></p></li>
</ul>
</div>
<div id="analyses" class="section level2" number="1.8">
<h2><span class="header-section-number">1.8</span> Analyses</h2>
<div id="calculation-principles-for-norins-indicators" class="section level3" number="1.8.1">
<h3><span class="header-section-number">1.8.1</span> Calculation principles for NorIns indicators</h3>
<p>The indicators from the Norwegian insect monitoring are calculated with functions in the <code>Norimon</code> package. This method is meant to capture a broad variety of insect indicators using data from <strong>NorIns</strong>.</p>
<p><strong>Main steps of workflow:</strong></p>
<ol style="list-style-type: decimal">
<li>Fetch data of biomass or community diversity from a centralized database (or GBIF). Diversity data can be subsetted on several taxonomic levels, but biomass is only available for whole samples.</li>
<li>Bootstrap observations and calculate mean and uncertainty of point estimates.</li>
<li>Compare observations to reference points.</li>
<li>Display and plot the results</li>
</ol>
<p><img src="images/NorIns_flow_chart.png" width="400pt" /></p>
<p>Most of the ecology comes into step 1, in choosing what data to use to describe a quality. This can be a custom selection of species, or a set of higher taxa such as specific genuses, families or an order. The goal is to choose a set of taxa that represent specific qualities of the community that can indicate the ecological status of the ecosystem. In addition to the selection of taxa, we have to decide on the level of aggregation, e.g. if we should aggregate the data on the region scale, locality scale, or even the individual sample occasion scale. For ecological indicators, we will aggregate the values to a year locality scale, where the variables summarises all catches in a locality in a year.</p>
<p>The second step is to get an estimate of the uncertainty of the data, were we use the bootstrap method. This method is flexible, as we could bootstrap the samples on different sampling levels (samples within localities, regions within country). For the insect indicators, we will bootstrap and summarize the variables to regional values, for example expressing the mean values of insect biomass in Trøndelag in 2021, with uncertainty.</p>
<p>Ecological knowledge also comes into step 3, comparing the values to a reference state. Here we have several options. We could for example use a single defined value as the reference state. But we can also use a point in time as a reference point (e.g. the start of a time series).</p>
<p>Taken together, this framework is meant to facilitate the calculation of an arbitrary set of insect indicators, based on the combination of choices in data to fetch, aggregation level, and reference comparison. We can work through an example with pollinators, to showcase the framework.</p>
<p>In the example, we start with connecting to the database in order to fetch the data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">connect_to_insect_db</span>()</span></code></pre></div>
<p>For convenience, the pollinator families can be retreived by the <code>get_pollinators()</code> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pollinators <span class="ot">&lt;-</span> <span class="fu">get_pollinators</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>pollinators_fam <span class="ot">&lt;-</span> pollinators <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(family_latin) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
family_norwegian
</th>
<th style="text-align:left;">
family_latin
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Gravebier
</td>
<td style="text-align:left;">
Andrenidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Langtungbebier
</td>
<td style="text-align:left;">
Apidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Korttungebier
</td>
<td style="text-align:left;">
Colletidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Markbier
</td>
<td style="text-align:left;">
Halictidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Buksamlerbier
</td>
<td style="text-align:left;">
Megachilidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Blomsterbier
</td>
<td style="text-align:left;">
Melittidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Blomfluer
</td>
<td style="text-align:left;">
Syrphidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Smygere
</td>
<td style="text-align:left;">
Hesperiidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Glansvinger
</td>
<td style="text-align:left;">
Lycaenidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Nymfevinger
</td>
<td style="text-align:left;">
Nymphalidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Svalestjerter
</td>
<td style="text-align:left;">
Papilionidae
</td>
</tr>
<tr>
<td style="text-align:left;">
Hvitvinger
</td>
<td style="text-align:left;">
Pieridae
</td>
</tr>
<tr>
<td style="text-align:left;">
Metallmerker (uoffisiell)
</td>
<td style="text-align:left;">
Riodinidae
</td>
</tr>
</tbody>
</table>
<p>We then fetch the community data for these families through the <code>get_observations</code> function. We additionally subset the habitat type that we are interested in, here semi-natural land. The result is a tibble of the aggregated number of species, shannon diversity, and the mean number of genetic variants per species. The default aggregation level is “year_locality”, meaning the total observations for a locality within a year. [The output currently contains some experimental values. Shannon diversity doesn’t really make sense without counts/amounts, etc…]</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>poll_loc_year <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_families =</span> pollinators_fam,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">subset_habitat =</span> <span class="st">&quot;Semi-nat&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
locality
</th>
<th style="text-align:left;">
habitat_type
</th>
<th style="text-align:left;">
region_name
</th>
<th style="text-align:right;">
no_species
</th>
<th style="text-align:right;">
shannon_div
</th>
<th style="text-align:right;">
mean_asv_per_species
</th>
<th style="text-align:right;">
GDE_by_asv
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
Semi-nat_01
</td>
<td style="text-align:left;">
Semi-nat
</td>
<td style="text-align:left;">
Østlandet
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
49.47
</td>
<td style="text-align:right;">
2.68
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
Semi-nat_02
</td>
<td style="text-align:left;">
Semi-nat
</td>
<td style="text-align:left;">
Østlandet
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
28.64
</td>
<td style="text-align:right;">
1.44
</td>
<td style="text-align:right;">
0.84
</td>
</tr>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
Semi-nat_03
</td>
<td style="text-align:left;">
Semi-nat
</td>
<td style="text-align:left;">
Østlandet
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
34.07
</td>
<td style="text-align:right;">
1.57
</td>
<td style="text-align:right;">
0.85
</td>
</tr>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
Semi-nat_04
</td>
<td style="text-align:left;">
Semi-nat
</td>
<td style="text-align:left;">
Østlandet
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
42.90
</td>
<td style="text-align:right;">
1.89
</td>
<td style="text-align:right;">
0.77
</td>
</tr>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
Semi-nat_05
</td>
<td style="text-align:left;">
Semi-nat
</td>
<td style="text-align:left;">
Østlandet
</td>
<td style="text-align:right;">
78
</td>
<td style="text-align:right;">
52.19
</td>
<td style="text-align:right;">
1.90
</td>
<td style="text-align:right;">
0.67
</td>
</tr>
</tbody>
</table>
<div id="bootstrap-observations" class="section level4" number="1.8.1.1">
<h4><span class="header-section-number">1.8.1.1</span> Bootstrap observations</h4>
<p>The localities in the NorIns program are (semi-)randomly selected and can be viewed as samples of a larger population. Individually, they represent a single measurement of an insect community in a habitat type in a region. To get the sampling uncertainty for this representation, we can bootstrap the values by this simple prosess: we choose a random set of localities within a year and region (with replacement) and calculate the average values. We then repeat this process a large number of times to get a bootstrap sample of values, which can be used to express the uncertainty in the dataset.</p>
<p>We typically have 10 localities for a given habitat type and region each year, which is not very much to base our uncertainty estimates on. But bootstrapping works fairly well on small samples and has the advantage that is doesn’t make assumptions of the statistical distribution of the errors. Note that once we get a larger dataset with repeating surveys every 5 years, it probably makes sense to do some kind of parametric (hierarcichal) modelling of the values instead of this simple bootstrap.</p>
<p>When <strong>NorIns</strong> is fully scaled up, it will have 50 localities for each covered habitat type in every country region, with 10 localities every year, in a rotating survey scheme over 5 years. Since the program is rolled out sequentially starting in 2020, for semi-natural land it currently covers 4/5 of the country, with varying amounts of localities within each region. The map below displays the localities surveyed so far.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>semi_loc <span class="ot">&lt;-</span> <span class="fu">get_localities</span>(<span class="at">dataset =</span> <span class="st">&quot;NasIns&quot;</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">habitat_type =</span> <span class="st">&quot;Semi-nat&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>norway_regions <span class="ot">&lt;-</span> <span class="fu">get_map</span>()</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/location_map-1.png" width="672" /></p>
<p>The bootstrap routine is implemented in the function <code>bootstrap_value()</code>, which takes a community (from <code>get_observation</code>) or weight dataset (from <code>get_biomass</code>) as its first input. It also needs to know what measurement in the dataset to bootstrap, and what, if any, grouping structure to aggregate the results on. In this example, we bootstrap the number of pollinator species, and aggregate the results on the year and regional scale.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>poll_richness_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(poll_loc_year,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">value =</span> no_species,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">&quot;region_name&quot;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                                        )</span></code></pre></div>
<p>This creates an object of type <code>boot_stat</code>. Calling it prints a simple summary of the bootstrap values.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>poll_richness_boot</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet         60.9    5.99          49.4           72.4
## 2  2021 Trøndelag         42.0    3.04          35.6           47.5
## 3  2021 Østlandet         53.7    5.86          41.8           64.8
## 4  2022 Sørlandet         29.4    5.56          18.5           40.4
## 5  2022 Trøndelag         34.7    2.57          30.1           40  
## 6  2022 Østlandet         36.0    2.83          30.4           41.5</code></pre>
<p>But the <code>boot_stat</code> object also stores the individual bootstrap values for later computation. [Why is is only 5 994 rows? Fix/figure out]</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>poll_richness_boot[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## $bootstrap_values
## # A tibble: 5,994 × 3
## # Groups:   year, region_name [6]
##     year region_name boot_values
##    &lt;int&gt; &lt;chr&gt;             &lt;dbl&gt;
##  1  2020 Østlandet          51.4
##  2  2020 Østlandet          69.4
##  3  2020 Østlandet          62  
##  4  2020 Østlandet          58.3
##  5  2020 Østlandet          54.6
##  6  2020 Østlandet          55.2
##  7  2020 Østlandet          66.6
##  8  2020 Østlandet          60.7
##  9  2020 Østlandet          56.9
## 10  2020 Østlandet          57.5
## # … with 5,984 more rows</code></pre>
</div>
<div id="comparing-bootstrap-values-to-a-reference-point" class="section level4" number="1.8.1.2">
<h4><span class="header-section-number">1.8.1.2</span> Comparing bootstrap values to a reference point</h4>
<p>Setting aside the difficulties in establishing robust reference values, the next step is to compare the observed values (with bootstrapped uncertainty) to the chosen reference value. This can be made in several ways. Most simply, if we have a single numeric value as a reference value, we can simply subtract that from the observed values. For example, if we observe 13 species of pollinators in 2022 at a location, and the reference point is 10, the 2022 has increased by 13 - 10 = 3 species. Such subtractions should be made on the set of bootstrapped values, and new summary statistics calculated, preserving the uncertainty from the bootstrap. The <code>boot_stat</code> has its own subtraction method do to just that. In this example, we set the reference value arbitrarily to 30 species.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>poll_richness_boot</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet         60.9    5.99          49.4           72.4
## 2  2021 Trøndelag         42.0    3.04          35.6           47.5
## 3  2021 Østlandet         53.7    5.86          41.8           64.8
## 4  2022 Sørlandet         29.4    5.56          18.5           40.4
## 5  2022 Trøndelag         34.7    2.57          30.1           40  
## 6  2022 Østlandet         36.0    2.83          30.4           41.5</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>diff_poll_richness_boot <span class="ot">&lt;-</span> poll_richness_boot <span class="sc">-</span> <span class="dv">30</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>diff_poll_richness_boot</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet       30.9      5.99        19.4             42.4
## 2  2021 Trøndelag       12.0      3.04         5.6             17.5
## 3  2021 Østlandet       23.7      5.86        11.8             34.8
## 4  2022 Sørlandet       -0.633    5.56       -11.5             10.4
## 5  2022 Trøndelag        4.68     2.57         0.100           10  
## 6  2022 Østlandet        5.95     2.83         0.400           11.5</code></pre>
<p>Alternatively, we could use a reference point in the time series itself. Say for example that we want to use the values for species richness of pollinators in semi-natural land i Østlandet 2020 as a reference point. We can then calculate the difference (the contrast) between this level and all the other levels. We do this by the function <code>boot_contrast()</code></p>
<p><strong>NB! This functionality is in development. It currently works for single rows as reference points, but needs updating to allow for referencing several values, e.g using the start values for all regions and habitat types as their own reference points.</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>diff_poll_richness_boot2 <span class="ot">&lt;-</span> poll_richness_boot <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">boot_contrast</span>(year <span class="sc">==</span> <span class="dv">2020</span> <span class="sc">&amp;</span> region_name <span class="sc">==</span> <span class="st">&#39;Østlandet&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>diff_poll_richness_boot2</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet         0       0              0              0  
## 2  2021 Trøndelag       -18.9     6.65         -32.4           -5.6
## 3  2021 Østlandet        -7.16    8.44         -24.3            9.1
## 4  2022 Sørlandet       -31.5     8.14         -47.2          -15.3
## 5  2022 Trøndelag       -26.2     6.41         -39.2          -13.6
## 6  2022 Østlandet       -24.9     6.73         -38.1          -11.7</code></pre>
</div>
<div id="normalizing-the-values" class="section level4" number="1.8.1.3">
<h4><span class="header-section-number">1.8.1.3</span> Normalizing the values</h4>
<p>After the comparison to a reference value, we need to normalize the indicator values to lie between 0 and 1. This can be done in several ways (insert link to scaling chapter). The simplest case is to use a linear scaling, with a natural zero. This can be done by dividing the indicator values by the highest value state. A <code>boot_stat</code> object has a <code>/</code> function that divides each bootstap value by a given value, truncates the highest values to 1, and recalculates the summary values.</p>
<p>[Show this, but need to think on how to do this with difference values]</p>
</div>
<div id="display-and-plot-bootstrap-values" class="section level4" number="1.8.1.4">
<h4><span class="header-section-number">1.8.1.4</span> Display and plot bootstrap values</h4>
<p>The boot_stat class also has its own plot function. It tries to plot a comparison of the bootstrap distributions over years, for each group. For example, if we plot the object <code>diff_poll_richness_boot</code>, we can look at the yearly differences in beetles species richness in the two geographic regions: (Note that we have only 1 year of data from Sørlandet so far)</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(diff_poll_richness_boot)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/beetle_richness_boot-1.png" width="672" /></p>
<p>In the cases where we have used a single row as a reference point, this shows up as a sharp spike at 0.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(diff_poll_richness_boot2)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/diff_beetle_richness_boot2-1.png" width="672" /></p>
<p>More plotting options are available, see the <code>Norimon</code> indicator workflow vignette.</p>
</div>
<div id="map-plots" class="section level4" number="1.8.1.5">
<h4><span class="header-section-number">1.8.1.5</span> Map plots</h4>
<p>In addition to the density plots above, we can also display the values geographically, in a map. The <code>map_plot()</code> function takes a <code>boot_stat</code> object and plots the values according to its region names.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_plot</span>(poll_richness_boot)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/map_plot_cutout-1.png" width="672" /></p>
<p>By default, it only shows the regions with data, but this can be overridden manually:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_plot</span>(poll_richness_boot,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">whole_country =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/map_plot_whole-1.png" width="672" /></p>
<p>We can also choose a different palette, for example from the NinaR package, and visualize the uncertainty by setting the transparency of the colors from the bootstrap standard deviations. By the way, most of these functions can be piped as well:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>diff_poll_richness_boot <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_plot</span>(<span class="at">palette =</span> <span class="st">&quot;orange-green&quot;</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">whole_country =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">alpha_from_sd =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/diff_beetle_richness_boot_map-1.png" width="672" /></p>
<p>This concludes the tour of the <code>Norimon</code> functionality.</p>
</div>
</div>
<div id="calculation-principles-for-nbbm-indicators" class="section level3" number="1.8.2">
<h3><span class="header-section-number">1.8.2</span> Calculation principles for NBBM indicators</h3>
<p>These indicators were developed for the Nature Index of Norway, back in 2010 by Ola Diserud and Sandra Åström [ref], and is calculated routinely on a yearly basis [see xx for the most current report].</p>
<p>These indicators summarize the state of a bumblebee or butterfly community by estimating the difference from a reference community. Formally, the community indicator (CI) is expressed as the relative change of the community from a state of reference (SR), were the change is calculated by a state of change (ST).</p>
<p><span class="math display">\[CI = \frac{SR-SC}{SR}\]</span>
The state of reference (SR) represents a community of species that can be expected to be observed in a given habitat type and region. It is calculated by assigning each species to class of expected commonality; common (C), sporadic (S) and rare (R) species. This classification is done by expert opinion, informed by known present and past species distributions. This state of reference doesn’t contain all current possible species, only a subset of species, making up a historical reference community. Potential observations of “new” species therefore doesn’t inform the indicator value at all. Common species is expected to be observed in at least 5 % of the surveyed transects in a habitat type and region. Sporadic species similarly is defined as having a presence below 5 % but above 1 %. Rare species is seen in no more than 1 % of the transects, and lastly, species not seen in any transect is assumed as lost (L) for the purpose of this calculation.</p>
<p>Each commonality class gets it’s own weight, so that common species inform the reference state more than sporadic species, followed by rare species. The state of reference (SR) is thus a value, where each species adds to the state according to its commonality. Formally, it is defined as:</p>
<p><span class="math display">\[SR = n_C * w_{C, SR} + n_S * w_{S, SR} + n_R * w_{R, SR} = \sum_{i = (C, S, R)} n_i * w_{i, SR}, \]</span>
where <span class="math inline">\(n_i\)</span> is the number of species in a commonality class (C, S, R), and the weights <span class="math inline">\([w_{C, SR}, w_{S, SR}, w_{R, SR}]\)</span> specifies their respective contribution to the reference state (SR). The weights used is <span class="math inline">\([w_{C, SR}, w_{S, SR}, w_{R, SR}] = [1.0, 0.75, 0.50]\)</span>, i.e. a sporadic species has 75 % the weight of a common species, and a rare species has 50 % the weight of a common species.</p>
<p>The state of change (SC) is calculated as
<span class="math display">\[SC = n_{CS} * w_{CS} + n_{CR} * w_{CR} + n_{CL} * w_{CL} + n_{SR} * w_{SR} + n_{SL} * w_{SL} + n_{RL} * w_{RL}, \]</span>
where <span class="math inline">\(n_{CS}\)</span> is the number of expected common species (C) that is observed sporadically (S), and <span class="math inline">\(w_{CS}\)</span> is the weight of this change. Similarly, <span class="math inline">\(n_{CR}\)</span> is the number of expected species that is observed rarely, <span class="math inline">\(n_{RL}\)</span> is the number of rare species that is lost, and so on. Potential increases in observation rates does not inform the indicator. Changes for common species is weighted more heavily than changes for less common species, and larger decreases is weighted more heavily than smalle decreases, such that <span class="math inline">\([w_{CS}, w_{CR}, w_{CL}, w_{SR}, w_{SL}, w_{RL}]= [0.50, 0.75, 1.00, 0.50, 0.75, 0.50]\)</span>.</p>
<p>The indicator values are estimated with uncertainty, by bootstrapping the set of localities within a region, and calculating the indicator for each of 999 such samples.</p>
<div id="calculation-example" class="section level4" number="1.8.2.1">
<h4><span class="header-section-number">1.8.2.1</span> Calculation example</h4>
<p>These calculations with bootstrap sampling is implemented in the R-package <code>bombLepiSurv</code> (Bombus and Lepidoptera Survey). We briefly show this functionality with bumblebees in semi-natural lands as an example.</p>
<p>We connect to the internal database with a convenience function <code>humlesommerfConnect</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>bombLepiSurv<span class="sc">::</span><span class="fu">humlesommerfConnect</span>()</span></code></pre></div>
<p>We can fetch the all observations of bumblebees in semi-natural land with the <code>getAllData</code> function. Species names is here shown in Norwegian.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>allBombusGrassland2022 <span class="ot">&lt;-</span> <span class="fu">getAllData</span>(<span class="at">type =</span> <span class="st">&quot;bumblebees&quot;</span>,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">habitat =</span> <span class="st">&quot;gressmark&quot;</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">language =</span> <span class="st">&quot;norsk&quot;</span>)</span></code></pre></div>
<p>A summary of the records is most easily plotted by <code>surveyBarPlot</code></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">surveyBarplot</span>(allBombusGrassland2022)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>But for calculating the indicators, we only consider the transects that had were surveyed for the standard 3 times per year, to cover the phenology of the entire season. Complete data sets can be fetched by the function <code>getComplData</code>, which fetches data from one habitat type and region at a time.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>bombus_trond_2022 <span class="ot">&lt;-</span> <span class="fu">getComplData</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">region_short =</span> <span class="st">&quot;Trond&quot;</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">year =</span> <span class="dv">2022</span>)</span></code></pre></div>
<p>The observed relative to the expected occurrences can be visualized through the <code>plotArt</code> function. This requires a reference community, which can be fetched through the <code>getExpValues</code> function.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>exp_bombus_trond <span class="ot">&lt;-</span> <span class="fu">getExpValues</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">region_short =</span> <span class="st">&quot;Trond&quot;</span>,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                                 ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">species =</span> species_latin,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>         <span class="fu">everything</span>())</span></code></pre></div>
<p>Species in green bars are species that are expected to be common, and should reach the green areas in the plot. Similarly with the blue (sporadic species), and red (rare species). We see in this case that Bombus soroeensis is an exptected sporadic species that only were observed rarely.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotArt</span>(bombus_trond_2022,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>        exp_bombus_trond)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-25-1.png" width="672" />
[add all species in exp to plot]</p>
<p>The actual calculation and bootstrapping is done in the function <code>calcInd</code>. This function calls the <code>getComplData</code> and <code>getExpectedValues</code> functions internally. It also requires the weights for the commonality classes in the reference community (SR), and the weights for the changes in state (CS). This is fetched internally via the functions <code>getAmountWeights</code> and <code>getDiffWeights</code>, respectively. Here the classes is in norwegian (v = common, m = sporadic, s = rare).</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getDiffWeights</span>()</span></code></pre></div>
<pre><code>##      v    m   s
## v 0.00 0.00 0.0
## m 0.50 0.00 0.0
## s 0.75 0.50 0.0
## t 1.00 0.75 0.5</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getAmountWeights</span>()</span></code></pre></div>
<pre><code>##   v    m   s
## 1 1 0.75 0.5</code></pre>
<p>Lastly, we specify the number of samples for the bootstrap</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>nIter <span class="ot">=</span> <span class="dv">999</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>hInd2022TrondGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Trond&quot;</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<p>The result [is going to be] an object of class [xxx]. Add print and plot methods…</p>
<p>Plotting functions for a series of indicator values is shown below in the indicator calculations.</p>
</div>
</div>
<div id="data-sets" class="section level3" number="1.8.3">
<h3><span class="header-section-number">1.8.3</span> Data sets</h3>
<p>There are a few different ways to access the data required for these indicators. Both the NMBB and the NorIns project stores its data in an internal database at NINA. They both also export most of their data to GBIF, but those exports need to be restructured before they can be processed in the following scripts.</p>
<p>For the time being, we will here use some internal functions in the bombLepiSurv and <code>Norimon</code> packages to fetch the required data. [We may add a separate data fetching script later on, describing how to get this data externally in a stable way.]</p>
<div id="norins-data" class="section level4" number="1.8.3.1">
<h4><span class="header-section-number">1.8.3.1</span> NorIns data</h4>
<p>The <code>Norimon</code> package has convenience functions to fetch data from the database, housed internally at NINA. This database is currently not available outside NINA, but we will implement a solution for this. Either we will make the database externally available, or we will provide an alternative route to the data from the GBIF export. For now, we will fetch the data through the <code>Norimon</code> functions.</p>
</div>
<div id="nmbb-data" class="section level4" number="1.8.3.2">
<h4><span class="header-section-number">1.8.3.2</span> NMBB data</h4>
<p>The data for the bumblebee and butterfly indicators can be accessed through the R-package <code>bombLepiSurv</code>. [Replace this with the GBIF version?. At least make the package public.]</p>
</div>
<div id="regions" class="section level4" number="1.8.3.3">
<h4><span class="header-section-number">1.8.3.3</span> Regions</h4>
<!-- In case you need to map the indicator value to regions, you can do that here. Remove this chapter if not relevant. -->
<p>Importing a shape file with the regional delineation. The indicators associated with the NorIns project can be attributed to the 5 country regions of Norway. Currently however, the data program only covers 4 of the 5 regions.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">connect_to_insect_db</span>()</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>norway_regions <span class="ot">&lt;-</span> Norimon<span class="sc">::</span><span class="fu">get_map</span>()</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>norway_reg_NorIns <span class="ot">&lt;-</span> norway_regions <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">!=</span> <span class="st">&quot;Vestlandet&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">geom =</span> <span class="fu">st_union</span>(geom))</span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(norway_reg_NorIns) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col =</span> <span class="st">&quot;region&quot;</span>) </span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>The indicators from the NMBB program is similary connected to regions, with the exception that the south-east region only covers the old fylke’s of Vestfold and Østfold, and that Nord-Norge isn’t covered yet. [Find the old fylke geometries and add this map to bombLepiSurv]</p>
</div>
</div>
<div id="calculation-of-norins-indicators" class="section level3" number="1.8.4">
<h3><span class="header-section-number">1.8.4</span> Calculation of NorIns indicators</h3>
<div id="biomass-of-flying-insects-in-semi-natural-land" class="section level4" number="1.8.4.1">
<h4><span class="header-section-number">1.8.4.1</span> Biomass of flying insects in semi-natural land</h4>
<p>Fetch the data.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>biomass_sn <span class="ot">&lt;-</span> <span class="fu">get_biomass</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>Calculate the indicator values for each region and year.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>biomass_sn_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(<span class="at">df =</span> biomass_sn,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">value =</span> avg_wet_weight,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;region_name&quot;</span>)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                                   )</span></code></pre></div>
<p>Compare values to a reference state. The reference state is here set uniformly for all regions, with a made up value just to be able to continue the calculations. Alternatively, we could calculate the indicator values for each region separately, compare to individual reference states, and then put it all together again.</p>
<p>We here use a single value as a reference state and normalize the values at the same time, using the <code>/</code> function.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>biomass_ref <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>biomass_sn_diff <span class="ot">&lt;-</span> biomass_sn_boot <span class="sc">/</span> biomass_ref</span></code></pre></div>
<p>Plot the results and display uncertainty.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>biomass_sn_diff</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name avg_wet_weight boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet            0.671  0.0794         0.514          0.834
## 2  2021 Trøndelag            0.863  0.0988         0.651          1    
## 3  2021 Østlandet            0.583  0.0743         0.437          0.735
## 4  2022 Sørlandet            0.469  0.0638         0.350          0.597
## 5  2022 Trøndelag            0.623  0.0686         0.494          0.768
## 6  2022 Østlandet            0.369  0.0440         0.285          0.459</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(biomass_sn_diff)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<p>Prepare export format.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>biomass_sn_to_exp <span class="ot">&lt;-</span> biomass_sn_diff<span class="sc">$</span>bootstrap_summary</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>biomass_sn_to_exp <span class="ot">&lt;-</span> biomass_sn_to_exp <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> region_name,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_value =</span> boot_value,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_sd =</span> boot_sd,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_lower2.5 =</span> boot_lower2<span class="fl">.5</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_upper97.5 =</span> boot_upper97<span class="fl">.5</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>biomass_sn_to_exp <span class="ot">&lt;-</span> norway_reg_NorIns  <span class="sc">%&gt;%</span> </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(biomass_sn_to_exp,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;region&quot;</span>),</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">multiple =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>biomass_sn_to_exp</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -76208 ymin: 6450245 xmax: 468357.5 ymax: 7237323
## Projected CRS: ETRS89 / UTM zone 33N
## # A tibble: 6 × 7
##   region                                                                                       geom  year ind_v…¹ ind_sd ind_l…² ind_u…³
##   &lt;chr&gt;                                                                          &lt;MULTIPOLYGON [m]&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Sørlandet (((-31605 6513854, -31464 6513743, -31449 6513590, -32255 6512745, -32512 6512740, -...  2022   0.469 0.0638   0.350   0.597
## 2 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2021   0.863 0.0988   0.651   1    
## 3 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2022   0.623 0.0686   0.494   0.768
## 4 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2020   0.671 0.0794   0.514   0.834
## 5 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2021   0.583 0.0743   0.437   0.735
## 6 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2022   0.369 0.0440   0.285   0.459
## # … with abbreviated variable names ¹​ind_value, ²​ind_lower2.5, ³​ind_upper97.5</code></pre>
</div>
<div id="species-richness-of-flying-insects-in-semi-natural-land" class="section level4" number="1.8.4.2">
<h4><span class="header-section-number">1.8.4.2</span> Species richness of flying insects in semi-natural land</h4>
<p>Fetch the data.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>richness_sn <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>Calculate the indicator values for each region and year.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>richness_sn_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(<span class="at">df =</span> richness_sn,</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">value =</span> no_species,</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;region_name&quot;</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>                                   )</span></code></pre></div>
<p>Compare to arbitrary reference value and normalize.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>richness_ref <span class="ot">&lt;-</span> <span class="dv">4000</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>richness_sn_diff <span class="ot">&lt;-</span> richness_sn_boot <span class="sc">/</span> richness_ref</span></code></pre></div>
<p>Plot the results and display uncertainty.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>richness_sn_diff</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet        0.518  0.0466         0.428          0.611
## 2  2021 Trøndelag        0.695  0.0447         0.594          0.771
## 3  2021 Østlandet        0.766  0.0435         0.682          0.851
## 4  2022 Sørlandet        0.544  0.0632         0.425          0.673
## 5  2022 Trøndelag        0.630  0.0296         0.575          0.687
## 6  2022 Østlandet        0.627  0.0198         0.588          0.668</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(richness_sn_diff)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<p>Prepare export format.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>richness_sn_to_exp <span class="ot">&lt;-</span> richness_sn_diff<span class="sc">$</span>bootstrap_summary</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>richness_sn_to_exp <span class="ot">&lt;-</span> richness_sn_to_exp <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> region_name,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_value =</span> boot_value,</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_sd =</span> boot_sd,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_lower2.5 =</span> boot_lower2<span class="fl">.5</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_upper97.5 =</span> boot_upper97<span class="fl">.5</span>)</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>richness_sn_to_exp <span class="ot">&lt;-</span> norway_reg_NorIns  <span class="sc">%&gt;%</span> </span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(richness_sn_to_exp,</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;region&quot;</span>),</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">multiple =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>richness_sn_to_exp</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -76208 ymin: 6450245 xmax: 468357.5 ymax: 7237323
## Projected CRS: ETRS89 / UTM zone 33N
## # A tibble: 6 × 7
##   region                                                                                       geom  year ind_v…¹ ind_sd ind_l…² ind_u…³
##   &lt;chr&gt;                                                                          &lt;MULTIPOLYGON [m]&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Sørlandet (((-31605 6513854, -31464 6513743, -31449 6513590, -32255 6512745, -32512 6512740, -...  2022   0.544 0.0632   0.425   0.673
## 2 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2021   0.695 0.0447   0.594   0.771
## 3 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2022   0.630 0.0296   0.575   0.687
## 4 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2020   0.518 0.0466   0.428   0.611
## 5 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2021   0.766 0.0435   0.682   0.851
## 6 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2022   0.627 0.0198   0.588   0.668
## # … with abbreviated variable names ¹​ind_value, ²​ind_lower2.5, ³​ind_upper97.5</code></pre>
</div>
<div id="species-richness-of-pollinators-in-semi-natural-land" class="section level4" number="1.8.4.3">
<h4><span class="header-section-number">1.8.4.3</span> Species richness of pollinators in semi-natural land</h4>
<p>Fetch the data.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>pollinator_fam <span class="ot">&lt;-</span> <span class="fu">get_pollinators</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(family_latin) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>pollinators_sn <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">subset_families =</span> pollinator_fam,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>Calculate the indicator values for each region and year.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>pollinators_sn_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(<span class="at">df =</span> pollinators_sn,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">value =</span> no_species,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">&quot;region_name&quot;</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>                                       )</span></code></pre></div>
<p>Compare to arbitrary reference value and normalize.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>pollinators_ref <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>pollinators_sn_diff <span class="ot">&lt;-</span> pollinators_sn_boot <span class="sc">/</span> pollinators_ref</span></code></pre></div>
<p>Plot the results and display uncertainty.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>pollinators_sn_diff</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name no_species boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet        0.925  0.0736         0.751          1    
## 2  2021 Trøndelag        0.839  0.0630         0.698          0.946
## 3  2021 Østlandet        0.910  0.0735         0.744          1    
## 4  2022 Sørlandet        0.591  0.119          0.356          0.832
## 5  2022 Trøndelag        0.695  0.0510         0.6            0.8  
## 6  2022 Østlandet        0.638  0.0547         0.532          0.743</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pollinators_sn_diff)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
<p>Prepare export format.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>pollinators_sn_to_exp <span class="ot">&lt;-</span> pollinators_sn_diff<span class="sc">$</span>bootstrap_summary</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>pollinators_sn_to_exp <span class="ot">&lt;-</span> pollinators_sn_to_exp <span class="sc">%&gt;%</span> </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> region_name,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_value =</span> boot_value,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_sd =</span> boot_sd,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_lower2.5 =</span> boot_lower2<span class="fl">.5</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_upper97.5 =</span> boot_upper97<span class="fl">.5</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>pollinators_sn_to_exp <span class="ot">&lt;-</span> norway_reg_NorIns  <span class="sc">%&gt;%</span> </span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(pollinators_sn_to_exp,</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;region&quot;</span>),</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">multiple =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>pollinators_sn_to_exp</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -76208 ymin: 6450245 xmax: 468357.5 ymax: 7237323
## Projected CRS: ETRS89 / UTM zone 33N
## # A tibble: 6 × 7
##   region                                                                                       geom  year ind_v…¹ ind_sd ind_l…² ind_u…³
##   &lt;chr&gt;                                                                          &lt;MULTIPOLYGON [m]&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Sørlandet (((-31605 6513854, -31464 6513743, -31449 6513590, -32255 6512745, -32512 6512740, -...  2022   0.591 0.119    0.356   0.832
## 2 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2021   0.839 0.0630   0.698   0.946
## 3 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2022   0.695 0.0510   0.6     0.8  
## 4 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2020   0.925 0.0736   0.751   1    
## 5 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2021   0.910 0.0735   0.744   1    
## 6 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2022   0.638 0.0547   0.532   0.743
## # … with abbreviated variable names ¹​ind_value, ²​ind_lower2.5, ³​ind_upper97.5</code></pre>
</div>
<div id="relationship-between-symphyta-and-parasitica-in-semi-natural-land" class="section level4" number="1.8.4.4">
<h4><span class="header-section-number">1.8.4.4</span> Relationship between Symphyta and Parasitica in semi-natural land</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>symphyta_fam <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Argidae&quot;</span>, <span class="st">&quot;Cephidae&quot;</span>, <span class="st">&quot;Cimbicidae&quot;</span>, </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Diprionidae&quot;</span>, <span class="st">&quot;Orussidae&quot;</span>, <span class="st">&quot;Pamphiliidae&quot;</span>, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Pergidae&quot;</span>, <span class="st">&quot;Siricidae&quot;</span>, <span class="st">&quot;Anaxyelidae&quot;</span>,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Tenthredinidae&quot;</span>, <span class="st">&quot;Xiphydriidae&quot;</span>, <span class="st">&quot;Xyelidae&quot;</span>) </span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>symphyta_sn <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_families =</span> symphyta_fam,</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>symphyta_sn</span></code></pre></div>
<pre><code>## # A tibble: 90 × 8
##     year locality habitat_type region_name no_species shannon_div mean_asv_per_species GDE_by_asv
##    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;            &lt;int&gt;       &lt;dbl&gt;                &lt;dbl&gt;      &lt;dbl&gt;
##  1  2020 Skog_01  Forest       Østlandet           15       15                    1          1   
##  2  2020 Skog_02  Forest       Østlandet           42       36.8                  1.31       0.88
##  3  2020 Skog_03  Forest       Østlandet           24       21                    1.38       0.88
##  4  2020 Skog_04  Forest       Østlandet            5        4.37                 1.4        0.87
##  5  2020 Skog_05  Forest       Østlandet           23       21.6                  1.17       0.94
##  6  2020 Skog_06  Forest       Østlandet            9        8.71                 1.11       0.97
##  7  2020 Skog_07  Forest       Østlandet           25       22.5                  1.4        0.9 
##  8  2020 Skog_08  Forest       Østlandet            7        6.73                 1.14       0.96
##  9  2020 Skog_09  Forest       Østlandet           18       17.4                  1.11       0.97
## 10  2020 Skog_10  Forest       Østlandet           11        4.6                  2.64       0.42
## # … with 80 more rows</code></pre>
<p>[Note, this list needs to be checked over by e.g. Arnstein.]</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>parasitica_fam <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Braconidae&quot;</span>, <span class="st">&quot;Ichneumonidae&quot;</span>, <span class="st">&quot;Chalcididae&quot;</span>, </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Eulophidae&quot;</span>, <span class="st">&quot;Pteromalidae&quot;</span>, <span class="st">&quot;Aphelinidae&quot;</span>, </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Scelionidae&quot;</span>, <span class="st">&quot;Eupelmidae&quot;</span>, <span class="st">&quot;Encyrtidae&quot;</span>, </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Mymaridae&quot;</span>, <span class="st">&quot;Diapriidae&quot;</span>, <span class="st">&quot;Bethylidae&quot;</span>, </span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Evaniidae&quot;</span>, <span class="st">&quot;Ceraphronidae&quot;</span>, <span class="st">&quot;Torymidae&quot;</span>, </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Dryinidae&quot;</span>, <span class="st">&quot;Eucharitidae&quot;</span>, <span class="st">&quot;Mymarommatidae&quot;</span>, </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Orussidae&quot;</span>, <span class="st">&quot;Megaspilidae&quot;</span>, <span class="st">&quot;Stephanidae&quot;</span>, </span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Trigonalidae&quot;</span>, <span class="st">&quot;Platygastridae&quot;</span>, <span class="st">&quot;Aulacidae&quot;</span>, </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Gasteruptiidae&quot;</span>, <span class="st">&quot;Rhopalosomatidae&quot;</span>, <span class="st">&quot;Larridae&quot;</span>, </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Agaonidae&quot;</span>, <span class="st">&quot;Pompilidae&quot;</span>, <span class="st">&quot;Bradynobaenidae&quot;</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>parasitica_sn <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_families =</span> parasitica_fam,</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>parasitica_sn</span></code></pre></div>
<pre><code>## # A tibble: 90 × 8
##     year locality habitat_type region_name no_species shannon_div mean_asv_per_species GDE_by_asv
##    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;            &lt;int&gt;       &lt;dbl&gt;                &lt;dbl&gt;      &lt;dbl&gt;
##  1  2020 Skog_01  Forest       Østlandet          208       187.                  1.34       0.9 
##  2  2020 Skog_02  Forest       Østlandet          508       447.                  1.39       0.88
##  3  2020 Skog_03  Forest       Østlandet          312       256.                  1.56       0.82
##  4  2020 Skog_04  Forest       Østlandet          130       121.                  1.2        0.93
##  5  2020 Skog_05  Forest       Østlandet          236       208.                  1.43       0.88
##  6  2020 Skog_06  Forest       Østlandet           99        90.3                 1.23       0.91
##  7  2020 Skog_07  Forest       Østlandet          337       284.                  1.46       0.84
##  8  2020 Skog_08  Forest       Østlandet          114       111.                  1.08       0.97
##  9  2020 Skog_09  Forest       Østlandet          168       152.                  1.27       0.9 
## 10  2020 Skog_10  Forest       Østlandet          175       161.                  1.22       0.92
## # … with 80 more rows</code></pre>
<p>Divide the richness of parasitica by symphyta. [Could make a function for this later on.]</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>par_sym <span class="ot">&lt;-</span> symphyta_sn <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(parasitica_sn,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span> <span class="ot">=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;locality&quot;</span> <span class="ot">=</span> <span class="st">&quot;locality&quot;</span>,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;habitat_type&quot;</span> <span class="ot">=</span> <span class="st">&quot;habitat_type&quot;</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;region_name&quot;</span> <span class="ot">=</span> <span class="st">&quot;region_name&quot;</span>),</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_sym&quot;</span>, <span class="st">&quot;_par&quot;</span>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">%&gt;%</span> </span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">par_per_sym_richn =</span> no_species_par <span class="sc">/</span> no_species_sym)</span></code></pre></div>
<p>Bootstrap the fraction of parasitica to symphyta.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>par_sym_sn_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(par_sym,</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">value =</span> par_per_sym_richn,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">&quot;region_name&quot;</span>))</span></code></pre></div>
<p>Compare to arbitrary reference value and normalize.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>par_sym_ref <span class="ot">&lt;-</span> <span class="dv">40</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>par_sym_sn_diff <span class="ot">&lt;-</span> par_sym_sn_boot <span class="sc">/</span> par_sym_ref</span></code></pre></div>
<p>Plot the results and display uncertainty.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>par_sym_sn_diff</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name par_per_sym_richn boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;                   &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet               0.289  0.0240         0.248          0.343
## 2  2021 Trøndelag               0.891  0.0944         0.691          1    
## 3  2021 Østlandet               0.603  0.0510         0.507          0.700
## 4  2022 Sørlandet               0.833  0.162          0.531          1    
## 5  2022 Trøndelag               0.557  0.0623         0.447          0.685
## 6  2022 Østlandet               0.705  0.132          0.474          0.991</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(par_sym_sn_diff)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>Prepare export format.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>par_sym_sn_exp <span class="ot">&lt;-</span> par_sym_sn_diff<span class="sc">$</span>bootstrap_summary</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>par_sym_sn_exp <span class="ot">&lt;-</span> par_sym_sn_exp <span class="sc">%&gt;%</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> region_name,</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_value =</span> boot_value,</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_sd =</span> boot_sd,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_lower2.5 =</span> boot_lower2<span class="fl">.5</span>,</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_upper97.5 =</span> boot_upper97<span class="fl">.5</span>)</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>par_sym_sn_exp <span class="ot">&lt;-</span> norway_reg_NorIns  <span class="sc">%&gt;%</span> </span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(par_sym_sn_exp,</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;region&quot;</span>),</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">multiple =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>par_sym_sn_exp</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -76208 ymin: 6450245 xmax: 468357.5 ymax: 7237323
## Projected CRS: ETRS89 / UTM zone 33N
## # A tibble: 6 × 7
##   region                                                                                       geom  year ind_v…¹ ind_sd ind_l…² ind_u…³
##   &lt;chr&gt;                                                                          &lt;MULTIPOLYGON [m]&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Sørlandet (((-31605 6513854, -31464 6513743, -31449 6513590, -32255 6512745, -32512 6512740, -...  2022   0.833 0.162    0.531   1    
## 2 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2021   0.891 0.0944   0.691   1    
## 3 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2022   0.557 0.0623   0.447   0.685
## 4 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2020   0.289 0.0240   0.248   0.343
## 5 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2021   0.603 0.0510   0.507   0.700
## 6 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2022   0.705 0.132    0.474   0.991
## # … with abbreviated variable names ¹​ind_value, ²​ind_lower2.5, ³​ind_upper97.5</code></pre>
</div>
<div id="genetic-diversity-evenness-of-flying-insects-in-semi-natural-land" class="section level4" number="1.8.4.5">
<h4><span class="header-section-number">1.8.4.5</span> Genetic diversity evenness of flying insects in semi-natural land</h4>
<p>[This is not fully implemented yet. Need full COI sequence to calculate the true GDE].
This could also be done for a subset of species.
(doi: <a href="https://doi.org/10.1101/2022.02.09.479762" class="uri">https://doi.org/10.1101/2022.02.09.479762</a>)</p>
<p>Fetch the data.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>richness_sn <span class="ot">&lt;-</span> <span class="fu">get_observations</span>(<span class="at">subset_year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>,</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">subset_region =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>Calculate the indicator values for each region and year.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>gde_sn_boot <span class="ot">&lt;-</span> <span class="fu">bootstrap_value</span>(<span class="at">df =</span> richness_sn,</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">value =</span> GDE_by_asv,</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">groups =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;region_name&quot;</span>)</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>                                   )</span></code></pre></div>
<p>Compare to arbitrary reference value and normalize.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>gde_sn_ref <span class="ot">&lt;-</span> <span class="fl">0.7</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>gde_sn_diff <span class="ot">&lt;-</span> gde_sn_boot <span class="sc">/</span> gde_sn_ref</span></code></pre></div>
<p>Plot the results and display uncertainty.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>gde_sn_diff</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##    year region_name GDE_by_asv boot_sd boot_lower2.5 boot_upper97.5
##   &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;
## 1  2020 Østlandet        0.871  0.0292         0.813          0.927
## 2  2021 Trøndelag        0.755  0.0245         0.704          0.801
## 3  2021 Østlandet        0.825  0.0181         0.789          0.86 
## 4  2022 Sørlandet        0.810  0.0281         0.76           0.867
## 5  2022 Trøndelag        0.747  0.0221         0.704          0.793
## 6  2022 Østlandet        0.933  0.0153         0.901          0.961</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gde_sn_diff)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Prepare export format.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>gde_sn_to_exp <span class="ot">&lt;-</span> gde_sn_diff<span class="sc">$</span>bootstrap_summary</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>gde_sn_to_exp <span class="ot">&lt;-</span> gde_sn_to_exp <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">region =</span> region_name,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_value =</span> boot_value,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_sd =</span> boot_sd,</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_lower2.5 =</span> boot_lower2<span class="fl">.5</span>,</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ind_upper97.5 =</span> boot_upper97<span class="fl">.5</span>)</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>gde_sn_to_exp <span class="ot">&lt;-</span> norway_reg_NorIns  <span class="sc">%&gt;%</span> </span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(gde_sn_to_exp,</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span> <span class="ot">=</span> <span class="st">&quot;region&quot;</span>),</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">multiple =</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>gde_sn_to_exp</span></code></pre></div>
<pre><code>## Simple feature collection with 6 features and 6 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: -76208 ymin: 6450245 xmax: 468357.5 ymax: 7237323
## Projected CRS: ETRS89 / UTM zone 33N
## # A tibble: 6 × 7
##   region                                                                                       geom  year ind_v…¹ ind_sd ind_l…² ind_u…³
##   &lt;chr&gt;                                                                          &lt;MULTIPOLYGON [m]&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Sørlandet (((-31605 6513854, -31464 6513743, -31449 6513590, -32255 6512745, -32512 6512740, -...  2022   0.810 0.0281   0.76    0.867
## 2 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2021   0.755 0.0245   0.704   0.801
## 3 Trøndelag (((227783 7068646, 227876 7069284, 227998 7069292, 228247 7069134, 228869 7069030, 2...  2022   0.747 0.0221   0.704   0.793
## 4 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2020   0.871 0.0292   0.813   0.927
## 5 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2021   0.825 0.0181   0.789   0.86 
## 6 Østlandet (((179915 6537265, 180246 6536997, 180600 6536671, 181028 6536601, 181197 6536581, 1...  2022   0.933 0.0153   0.901   0.961
## # … with abbreviated variable names ¹​ind_value, ²​ind_lower2.5, ³​ind_upper97.5</code></pre>
</div>
</div>
<div id="calculation-of-nbbm-indicators" class="section level3" number="1.8.5">
<h3><span class="header-section-number">1.8.5</span> Calculation of NBBM indicators</h3>
</div>
<div id="bumblebees-in-open-landscapes" class="section level3" number="1.8.6">
<h3><span class="header-section-number">1.8.6</span> Bumblebees in open landscapes</h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(bombLepiSurv)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">humlesommerfConnect</span>(<span class="at">host =</span> <span class="st">&quot;ninradardata01.nina.no&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>allBombusGressmark2022 <span class="ot">&lt;-</span> <span class="fu">getAllData</span>(<span class="at">type =</span> <span class="st">&quot;bumblebees&quot;</span>,</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">habitat =</span> <span class="st">&quot;gressmark&quot;</span>,</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">language =</span> <span class="st">&quot;norsk&quot;</span>)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="fu">surveyBarplot</span>(allBombusGressmark2022) <span class="co">#+</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:bombusGressBarplot"></span>
<img src="DRAFT_insectIndicators_files/figure-html/bombusGressBarplot-1.png" alt="Bumblebees in grasslands 2021" width="672" />
<p class="caption">
Figure 1.1: Bumblebees in grasslands 2021
</p>
</div>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  ggtitle(&quot;Humler i gressmark 2021&quot;)</span></span></code></pre></div>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>nIter <span class="ot">=</span> <span class="dv">999</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>hInd2022TrondGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Trond&quot;</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>hInd2022SorGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Sor&quot;</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>hInd2022OstGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Ost&quot;</span>,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<p>[Implement this]</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>hInd2022VestGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Humler&quot;</span>,</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Vest&quot;</span>,</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
</div>
<div id="butterflies-in-open-landscapes" class="section level3" number="1.8.7">
<h3><span class="header-section-number">1.8.7</span> Butterflies in open landscapes</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>nIter <span class="ot">=</span> <span class="dv">999</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>sInd2022TrondGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Sommerfugl&quot;</span>,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Trond&quot;</span>,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>sInd2022SorGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Sommerfugl&quot;</span>,</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Sor&quot;</span>,</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>sInd2022OstGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Sommerfugl&quot;</span>,</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Ost&quot;</span>,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<p>[Implement this]</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>sInd2022VestGress <span class="ot">&lt;-</span> <span class="fu">calcInd</span>(<span class="at">type =</span> <span class="st">&quot;Sommerfugl&quot;</span>,</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">region_short =</span> <span class="st">&quot;Vest&quot;</span>,</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">habitat =</span> <span class="st">&quot;Gressmark&quot;</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nIter =</span> nIter,</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">save.draws =</span> T)</span></code></pre></div>
<p>The calculations for earlier years is already present as datasets in the R-package and can be fetched individually. Once this is done, we can plot the timeseries of values using the function <code>indPlot</code>.</p>
<p>Todo, put these in the new version of the package.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#load(&quot;out/IndicatorValues2020.Rdata&quot;)</span></span></code></pre></div>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022VestGress&quot;</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022VestSkog&quot;</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022TrondGress&quot;</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022TrondSkog&quot;</span>)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022OstGress&quot;</span>)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022OstSkog&quot;</span>)</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022SorGress&quot;</span>)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2022SorSkog&quot;</span>)</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021TrondGress&quot;</span>)</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021TrondSkog&quot;</span>)</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021OstGress&quot;</span>)</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021OstSkog&quot;</span>)</span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021SorGress&quot;</span>)</span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2021SorSkog&quot;</span>)</span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020TrondGress&quot;</span>)</span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020TrondSkog&quot;</span>)</span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020OstGress&quot;</span>)</span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020OstSkog&quot;</span>)</span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020SorGress&quot;</span>)</span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2020SorSkog&quot;</span>)</span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019TrondGress&quot;</span>)</span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019TrondSkog&quot;</span>)</span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019OstGress&quot;</span>)</span>
<span id="cb95-28"><a href="#cb95-28" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019OstSkog&quot;</span>)</span>
<span id="cb95-29"><a href="#cb95-29" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019SorGress&quot;</span>)</span>
<span id="cb95-30"><a href="#cb95-30" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2019SorSkog&quot;</span>)</span>
<span id="cb95-31"><a href="#cb95-31" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018TrondGress&quot;</span>)</span>
<span id="cb95-32"><a href="#cb95-32" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018TrondSkog&quot;</span>)</span>
<span id="cb95-33"><a href="#cb95-33" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018OstGress&quot;</span>)</span>
<span id="cb95-34"><a href="#cb95-34" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018OstSkog&quot;</span>)</span>
<span id="cb95-35"><a href="#cb95-35" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018SorGress&quot;</span>)</span>
<span id="cb95-36"><a href="#cb95-36" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2018SorSkog&quot;</span>)</span>
<span id="cb95-37"><a href="#cb95-37" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017TrondGress&quot;</span>)</span>
<span id="cb95-38"><a href="#cb95-38" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017TrondSkog&quot;</span>)</span>
<span id="cb95-39"><a href="#cb95-39" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017OstGress&quot;</span>)</span>
<span id="cb95-40"><a href="#cb95-40" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017OstSkog&quot;</span>)</span>
<span id="cb95-41"><a href="#cb95-41" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017SorGress&quot;</span>)</span>
<span id="cb95-42"><a href="#cb95-42" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2017SorSkog&quot;</span>)</span>
<span id="cb95-43"><a href="#cb95-43" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016TrondGress&quot;</span>)</span>
<span id="cb95-44"><a href="#cb95-44" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016TrondSkog&quot;</span>)</span>
<span id="cb95-45"><a href="#cb95-45" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016OstGress&quot;</span>)</span>
<span id="cb95-46"><a href="#cb95-46" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016OstSkog&quot;</span>)</span>
<span id="cb95-47"><a href="#cb95-47" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016SorGress&quot;</span>)</span>
<span id="cb95-48"><a href="#cb95-48" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2016SorSkog&quot;</span>)</span>
<span id="cb95-49"><a href="#cb95-49" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015TrondGress&quot;</span>)</span>
<span id="cb95-50"><a href="#cb95-50" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015TrondSkog&quot;</span>)</span>
<span id="cb95-51"><a href="#cb95-51" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015OstGress&quot;</span>)</span>
<span id="cb95-52"><a href="#cb95-52" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015OstSkog&quot;</span>)</span>
<span id="cb95-53"><a href="#cb95-53" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015SorGress&quot;</span>)</span>
<span id="cb95-54"><a href="#cb95-54" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2015SorSkog&quot;</span>)</span>
<span id="cb95-55"><a href="#cb95-55" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014TrondGress&quot;</span>)</span>
<span id="cb95-56"><a href="#cb95-56" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014TrondSkog&quot;</span>)</span>
<span id="cb95-57"><a href="#cb95-57" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014OstGress&quot;</span>)</span>
<span id="cb95-58"><a href="#cb95-58" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014OstSkog&quot;</span>)</span>
<span id="cb95-59"><a href="#cb95-59" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014SorGress&quot;</span>)</span>
<span id="cb95-60"><a href="#cb95-60" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2014SorSkog&quot;</span>)</span>
<span id="cb95-61"><a href="#cb95-61" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013TrondGress&quot;</span>)</span>
<span id="cb95-62"><a href="#cb95-62" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013TrondSkog&quot;</span>)</span>
<span id="cb95-63"><a href="#cb95-63" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013OstGress&quot;</span>)</span>
<span id="cb95-64"><a href="#cb95-64" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013OstSkog&quot;</span>)</span>
<span id="cb95-65"><a href="#cb95-65" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013SorGress&quot;</span>)</span>
<span id="cb95-66"><a href="#cb95-66" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2013SorSkog&quot;</span>)</span>
<span id="cb95-67"><a href="#cb95-67" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2012TrondGress&quot;</span>)</span>
<span id="cb95-68"><a href="#cb95-68" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2012TrondSkog&quot;</span>)</span>
<span id="cb95-69"><a href="#cb95-69" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2012OstGress&quot;</span>)</span>
<span id="cb95-70"><a href="#cb95-70" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2012OstSkog&quot;</span>)</span>
<span id="cb95-71"><a href="#cb95-71" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2011OstGress&quot;</span>)</span>
<span id="cb95-72"><a href="#cb95-72" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2011OstSkog&quot;</span>)</span>
<span id="cb95-73"><a href="#cb95-73" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2010OstGress&quot;</span>)</span>
<span id="cb95-74"><a href="#cb95-74" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2010OstSkog&quot;</span>)</span>
<span id="cb95-75"><a href="#cb95-75" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2009OstGress&quot;</span>)</span>
<span id="cb95-76"><a href="#cb95-76" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;sInd2009OstSkog&quot;</span>)</span>
<span id="cb95-77"><a href="#cb95-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-78"><a href="#cb95-78" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022VestGress&quot;</span>)</span>
<span id="cb95-79"><a href="#cb95-79" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022VestSkog&quot;</span>)</span>
<span id="cb95-80"><a href="#cb95-80" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022TrondGress&quot;</span>)</span>
<span id="cb95-81"><a href="#cb95-81" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022TrondSkog&quot;</span>)</span>
<span id="cb95-82"><a href="#cb95-82" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022OstGress&quot;</span>)</span>
<span id="cb95-83"><a href="#cb95-83" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022OstSkog&quot;</span>)</span>
<span id="cb95-84"><a href="#cb95-84" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022SorGress&quot;</span>)</span>
<span id="cb95-85"><a href="#cb95-85" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2022SorSkog&quot;</span>)</span>
<span id="cb95-86"><a href="#cb95-86" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021TrondGress&quot;</span>)</span>
<span id="cb95-87"><a href="#cb95-87" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021TrondSkog&quot;</span>)</span>
<span id="cb95-88"><a href="#cb95-88" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021OstGress&quot;</span>)</span>
<span id="cb95-89"><a href="#cb95-89" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021OstSkog&quot;</span>)</span>
<span id="cb95-90"><a href="#cb95-90" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021SorGress&quot;</span>)</span>
<span id="cb95-91"><a href="#cb95-91" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2021SorSkog&quot;</span>)</span>
<span id="cb95-92"><a href="#cb95-92" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020TrondGress&quot;</span>)</span>
<span id="cb95-93"><a href="#cb95-93" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020TrondSkog&quot;</span>)</span>
<span id="cb95-94"><a href="#cb95-94" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020OstGress&quot;</span>)</span>
<span id="cb95-95"><a href="#cb95-95" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020OstSkog&quot;</span>)</span>
<span id="cb95-96"><a href="#cb95-96" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020SorGress&quot;</span>)</span>
<span id="cb95-97"><a href="#cb95-97" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2020SorSkog&quot;</span>)</span>
<span id="cb95-98"><a href="#cb95-98" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019TrondGress&quot;</span>)</span>
<span id="cb95-99"><a href="#cb95-99" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019TrondSkog&quot;</span>)</span>
<span id="cb95-100"><a href="#cb95-100" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019OstGress&quot;</span>)</span>
<span id="cb95-101"><a href="#cb95-101" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019OstSkog&quot;</span>)</span>
<span id="cb95-102"><a href="#cb95-102" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019SorGress&quot;</span>)</span>
<span id="cb95-103"><a href="#cb95-103" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2019SorSkog&quot;</span>)</span>
<span id="cb95-104"><a href="#cb95-104" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018TrondGress&quot;</span>)</span>
<span id="cb95-105"><a href="#cb95-105" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018TrondSkog&quot;</span>)</span>
<span id="cb95-106"><a href="#cb95-106" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018OstGress&quot;</span>)</span>
<span id="cb95-107"><a href="#cb95-107" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018OstSkog&quot;</span>)</span>
<span id="cb95-108"><a href="#cb95-108" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018SorGress&quot;</span>)</span>
<span id="cb95-109"><a href="#cb95-109" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2018SorSkog&quot;</span>)</span>
<span id="cb95-110"><a href="#cb95-110" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017TrondGress&quot;</span>)</span>
<span id="cb95-111"><a href="#cb95-111" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017TrondSkog&quot;</span>)</span>
<span id="cb95-112"><a href="#cb95-112" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017OstGress&quot;</span>)</span>
<span id="cb95-113"><a href="#cb95-113" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017OstSkog&quot;</span>)</span>
<span id="cb95-114"><a href="#cb95-114" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017SorGress&quot;</span>)</span>
<span id="cb95-115"><a href="#cb95-115" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2017SorSkog&quot;</span>)</span>
<span id="cb95-116"><a href="#cb95-116" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016TrondGress&quot;</span>)</span>
<span id="cb95-117"><a href="#cb95-117" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016TrondSkog&quot;</span>)</span>
<span id="cb95-118"><a href="#cb95-118" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016OstGress&quot;</span>)</span>
<span id="cb95-119"><a href="#cb95-119" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016OstSkog&quot;</span>)</span>
<span id="cb95-120"><a href="#cb95-120" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016SorGress&quot;</span>)</span>
<span id="cb95-121"><a href="#cb95-121" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2016SorSkog&quot;</span>)</span>
<span id="cb95-122"><a href="#cb95-122" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015TrondGress&quot;</span>)</span>
<span id="cb95-123"><a href="#cb95-123" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015TrondSkog&quot;</span>)</span>
<span id="cb95-124"><a href="#cb95-124" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015OstGress&quot;</span>)</span>
<span id="cb95-125"><a href="#cb95-125" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015OstSkog&quot;</span>)</span>
<span id="cb95-126"><a href="#cb95-126" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015SorGress&quot;</span>)</span>
<span id="cb95-127"><a href="#cb95-127" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2015SorSkog&quot;</span>)</span>
<span id="cb95-128"><a href="#cb95-128" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014TrondGress&quot;</span>)</span>
<span id="cb95-129"><a href="#cb95-129" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014TrondSkog&quot;</span>)</span>
<span id="cb95-130"><a href="#cb95-130" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014OstGress&quot;</span>)</span>
<span id="cb95-131"><a href="#cb95-131" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014OstSkog&quot;</span>)</span>
<span id="cb95-132"><a href="#cb95-132" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014SorGress&quot;</span>)</span>
<span id="cb95-133"><a href="#cb95-133" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2014SorSkog&quot;</span>)</span>
<span id="cb95-134"><a href="#cb95-134" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013TrondGress&quot;</span>)</span>
<span id="cb95-135"><a href="#cb95-135" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013TrondSkog&quot;</span>)</span>
<span id="cb95-136"><a href="#cb95-136" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013OstGress&quot;</span>)</span>
<span id="cb95-137"><a href="#cb95-137" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013OstSkog&quot;</span>)</span>
<span id="cb95-138"><a href="#cb95-138" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013SorGress&quot;</span>)</span>
<span id="cb95-139"><a href="#cb95-139" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2013SorSkog&quot;</span>)</span>
<span id="cb95-140"><a href="#cb95-140" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2012TrondGress&quot;</span>)</span>
<span id="cb95-141"><a href="#cb95-141" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2012TrondSkog&quot;</span>)</span>
<span id="cb95-142"><a href="#cb95-142" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2012OstGress&quot;</span>)</span>
<span id="cb95-143"><a href="#cb95-143" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2012OstSkog&quot;</span>)</span>
<span id="cb95-144"><a href="#cb95-144" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2011OstGress&quot;</span>)</span>
<span id="cb95-145"><a href="#cb95-145" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2011OstSkog&quot;</span>)</span>
<span id="cb95-146"><a href="#cb95-146" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2010OstGress&quot;</span>)</span>
<span id="cb95-147"><a href="#cb95-147" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2010OstSkog&quot;</span>)</span>
<span id="cb95-148"><a href="#cb95-148" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2009OstGress&quot;</span>)</span>
<span id="cb95-149"><a href="#cb95-149" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;hInd2009OstSkog&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>hGressIndVals <span class="ot">&lt;-</span> <span class="fu">collectIndData</span>(<span class="at">taxa =</span> <span class="st">&quot;bumblebees&quot;</span>, </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">habitat =</span> <span class="st">&quot;gressmark&quot;</span>,</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">years =</span> <span class="dv">2009</span><span class="sc">:</span><span class="dv">2022</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">indPlot</span>(<span class="at">input =</span> hGressIndVals,</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">confLevel =</span> <span class="st">&quot;95%&quot;</span>,</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">lineWidth =</span> <span class="dv">1</span>,</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">dodge =</span> <span class="fl">0.5</span>,</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">pointSize =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Indicator values for bumblebees in semi-natural landscapes&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2009</span><span class="sc">:</span><span class="dv">2022</span>)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/bombusGressIndPlot-1.png" width="672" /></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>sGressIndVals <span class="ot">&lt;-</span> <span class="fu">collectIndData</span>(<span class="at">taxa =</span> <span class="st">&quot;butterflies&quot;</span>, </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">habitat =</span> <span class="st">&quot;gressmark&quot;</span>,</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">years =</span> <span class="dv">2009</span><span class="sc">:</span><span class="dv">2022</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="fu">indPlot</span>(<span class="at">input =</span> sGressIndVals,</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">confLevel =</span> <span class="st">&quot;95%&quot;</span>,</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">lineWidth =</span> <span class="dv">1</span>,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">dodge =</span> <span class="fl">0.5</span>,</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">pointSize =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Indicator values for butterflies in semi-natural landscapes&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2009</span><span class="sc">:</span><span class="dv">2022</span>)</span></code></pre></div>
<p><img src="DRAFT_insectIndicators_files/figure-html/lepiGressIndPlot-1.png" width="672" /></p>
</div>
</div>
<div id="prepare-export" class="section level2" number="1.9">
<h2><span class="header-section-number">1.9</span> Prepare export</h2>
<!-- Text here -->
<div id="eksport-file-final-product" class="section level3" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> Eksport file (final product)</h3>
<!-- Export final file. Ideally a georeferenced shape or raster with indicators values (raw and normalised), reference values and errors. -->
</div>
</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Template for indicator documentation</strong>" was written by . </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
