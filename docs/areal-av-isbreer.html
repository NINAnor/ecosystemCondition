<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 15 Areal av isbreer | Indicators for Ecosystem Condition in Norway</title>
<meta name="author" content="Anders L. Kolstad">
<meta name="description" content="Author and date: Anders L. Kolstad March 2023 Ecosystem Økologisk.egenskap ECT.class Fjell Landskapsøkologiske mønstre Landscape and seascape characteristics  15.1 Introduction This indicator...">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="Chapter 15 Areal av isbreer | Indicators for Ecosystem Condition in Norway">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ninanor.github.io/ecosystemCondition/index.html/areal-av-isbreer.html">
<meta property="og:image" content="https://ninanor.github.io/ecosystemCondition/index.html/images/Picture1.png">
<meta property="og:description" content="Author and date: Anders L. Kolstad March 2023 Ecosystem Økologisk.egenskap ECT.class Fjell Landskapsøkologiske mønstre Landscape and seascape characteristics  15.1 Introduction This indicator...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 15 Areal av isbreer | Indicators for Ecosystem Condition in Norway">
<meta name="twitter:description" content="Author and date: Anders L. Kolstad March 2023 Ecosystem Økologisk.egenskap ECT.class Fjell Landskapsøkologiske mønstre Landscape and seascape characteristics  15.1 Introduction This indicator...">
<meta name="twitter:image" content="https://ninanor.github.io/ecosystemCondition/index.html/images/Picture1.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.27/datatables.js"></script><link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Indicators for Ecosystem Condition in Norway</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About </a></li>
<li class="book-part">INDICATORS</li>
<li><a class="" href="gjengroing.html"><span class="header-section-number">1</span> Enchroachment</a></li>
<li><a class="" href="nature-index-product.html"><span class="header-section-number">2</span> Nature index product</a></li>
<li><a class="" href="slitasje.html"><span class="header-section-number">3</span> Anthropogenic disturbance to soils and vegetation (ADSV)</a></li>
<li><a class="" href="median-summer-temp.html"><span class="header-section-number">4</span> Median Summer Temperature</a></li>
<li><a class="" href="alien-species.html"><span class="header-section-number">5</span> Alien species</a></li>
<li><a class="" href="functional-plant-indicators-wetland.html"><span class="header-section-number">6</span> Functional Plant Indicators - Wetlands</a></li>
<li><a class="" href="functional-plant-indicators-seminat.html"><span class="header-section-number">7</span> Functional Plant Indicators - Semi-Natural Ecosystems</a></li>
<li><a class="" href="functional-plant-indicators-open.html"><span class="header-section-number">8</span> Functional Plant Indicators - Naturally Open Ecosystems</a></li>
<li><a class="" href="trophic-level-biomass-ratios.html"><span class="header-section-number">9</span> Trophic level biomass ratios</a></li>
<li><a class="" href="insect-indicators.html"><span class="header-section-number">10</span> Insect indicators</a></li>
<li><a class="" href="flood-frequency.html"><span class="header-section-number">11</span> Flood frequency</a></li>
<li class="book-part">R &amp; D</li>
<li><a class="" href="NDVI-indicator-natopen.html"><span class="header-section-number">12</span> NDVI - Naturally Open Ecosystems</a></li>
<li><a class="" href="NDVI-indicator-seminat.html"><span class="header-section-number">13</span> NDVI - Semi-natural Ecosystems</a></li>
<li><a class="" href="NDVI-indicator-wetland.html"><span class="header-section-number">14</span> NDVI - wetland ecosystems</a></li>
<li class="book-part">INDICATORS FROM THE ALPINE ASSESSMENT</li>
<li><a class="active" href="areal-av-isbreer.html"><span class="header-section-number">15</span> Areal av isbreer</a></li>
<li class="book-part">DEPRECATED</li>
<li><a class="" href="areal-uten-d%C3%B8d-eller-skadet-r%C3%B8sslyng-i-kystlynghei.html"><span class="header-section-number">16</span> Areal uten død eller skadet røsslyng i kystlynghei</a></li>
<li class="book-part">GENERAL TOPICS</li>
<li><a class="" href="naturtype.html"><span class="header-section-number">17</span> Nature types</a></li>
<li><a class="" href="scaling-functions.html"><span class="header-section-number">18</span> Scaling functions</a></li>
<li><a class="" href="homogeneous-impact-areas.html"><span class="header-section-number">19</span> Homogeneous Impact Areas</a></li>
<li><a class="" href="master-grid.html"><span class="header-section-number">20</span> Master grid</a></li>
<li><a class="" href="climate-indicators-explained.html"><span class="header-section-number">21</span> Climate indicators explained</a></li>
<li><a class="" href="oversikt-over-indikatorforslag.html"><span class="header-section-number">22</span> Oversikt over indikatorforslag</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/NINAnor/ecosystemCondition">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="areal-av-isbreer" class="section level1" number="15">
<h1>
<span class="header-section-number">15</span> Areal av isbreer<a class="anchor" aria-label="anchor" href="#areal-av-isbreer"><i class="fas fa-link"></i></a>
</h1>
<p><br></p>
<p><em>Author and date:</em></p>
<p>Anders L. Kolstad</p>
<p>March 2023</p>
<p><br></p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="12%">
<col width="36%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th align="left">Ecosystem</th>
<th align="left">Økologisk.egenskap</th>
<th align="left">ECT.class</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Fjell</td>
<td align="left">Landskapsøkologiske mønstre</td>
<td align="left">Landscape and seascape characteristics</td>
</tr></tbody>
</table></div>
<br><br><hr>
<div id="introduction-3" class="section level2" number="15.1">
<h2>
<span class="header-section-number">15.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction-3"><i class="fas fa-link"></i></a>
</h2>
<p>This indicator describes the relative change in glacial extent for each of fire regions in Norway. A <a href="https://ninanor.github.io/IBECA/faktaark.html#Areal_av_isbreer">slightly different indicator</a> was used in the alpine assessment.</p>
</div>
<div id="about-the-underlying-data-5" class="section level2" number="15.2">
<h2>
<span class="header-section-number">15.2</span> About the underlying data<a class="anchor" aria-label="anchor" href="#about-the-underlying-data-5"><i class="fas fa-link"></i></a>
</h2>
<p>The indicator uses the maps of glacier extent ( <em>breatlas</em> ) from <a href="https://www.nve.no/vann-og-vassdrag/vannets-kretsloep/bre/publikasjoner-publications/breatlas-glacier-inventories/">2018-2019</a> and compares it to a similar map from 1947-1985. Both maps are owned by NVE (Norsk vassdrags og energidirektorat). The new map is based on Sentinel images, and the old map is a digitised version of the N50 maps, with some additional areal photo interpretation on top.</p>
<div id="representativity-in-time-and-space-6" class="section level3" number="15.2.1">
<h3>
<span class="header-section-number">15.2.1</span> Representativity in time and space<a class="anchor" aria-label="anchor" href="#representativity-in-time-and-space-6"><i class="fas fa-link"></i></a>
</h3>
<p>The data set (map) covers the entire Norwegian mainland. There are only two time steps, but we expect changes in glacial extent to be relatively linear or consistent over time.
The older map may have underestimated the glacial extent due to a better chance of smaller snow and ice patches being captured by Sentinel contra aerial photo interpretations.</p>
</div>
<div id="original-units-6" class="section level3" number="15.2.2">
<h3>
<span class="header-section-number">15.2.2</span> Original units<a class="anchor" aria-label="anchor" href="#original-units-6"><i class="fas fa-link"></i></a>
</h3>
<p>Area units (e.g. km2)</p>
</div>
<div id="temporal-coverage-7" class="section level3" number="15.2.3">
<h3>
<span class="header-section-number">15.2.3</span> Temporal coverage<a class="anchor" aria-label="anchor" href="#temporal-coverage-7"><i class="fas fa-link"></i></a>
</h3>
<p>1947-2019</p>
</div>
<div id="aditional-comments-about-the-dataset-3" class="section level3" number="15.2.4">
<h3>
<span class="header-section-number">15.2.4</span> Aditional comments about the dataset<a class="anchor" aria-label="anchor" href="#aditional-comments-about-the-dataset-3"><i class="fas fa-link"></i></a>
</h3>
<p>None</p>
</div>
</div>
<div id="ecosystem-characteristic-7" class="section level2" number="15.3">
<h2>
<span class="header-section-number">15.3</span> Ecosystem characteristic<a class="anchor" aria-label="anchor" href="#ecosystem-characteristic-7"><i class="fas fa-link"></i></a>
</h2>
<div id="norwegian-standard-4" class="section level3" number="15.3.1">
<h3>
<span class="header-section-number">15.3.1</span> Norwegian standard<a class="anchor" aria-label="anchor" href="#norwegian-standard-4"><i class="fas fa-link"></i></a>
</h3>
<p>The indicator was initially assigned the <em>Abiotiske forhold</em> characteristic, but now it is considered under <em>Landskapsøkologiske mønstre</em>. The initial justificaton was that glacial melting would influence water availability downstream. Now we put more weight on glaciers as not just resevoirs of ice and water, but as a habitat, and the presence or abundance of a specific habitat can be though of as an aspect of landscape state.</p>
</div>
<div id="seea-ect" class="section level3" number="15.3.2">
<h3>
<span class="header-section-number">15.3.2</span> SEEA ECT<a class="anchor" aria-label="anchor" href="#seea-ect"><i class="fas fa-link"></i></a>
</h3>
<p>The indicator is similarly assiged to the SEEA ECT class <em>C1 Landscape characteristics</em>.</p>
</div>
</div>
<div id="collinearities-with-other-indicators-10" class="section level2" number="15.4">
<h2>
<span class="header-section-number">15.4</span> Collinearities with other indicators<a class="anchor" aria-label="anchor" href="#collinearities-with-other-indicators-10"><i class="fas fa-link"></i></a>
</h2>
<p>None that are known.</p>
</div>
<div id="reference-state-and-values-3" class="section level2" number="15.5">
<h2>
<span class="header-section-number">15.5</span> Reference state and values<a class="anchor" aria-label="anchor" href="#reference-state-and-values-3"><i class="fas fa-link"></i></a>
</h2>
<div id="reference-state-2" class="section level3" number="15.5.1">
<h3>
<span class="header-section-number">15.5.1</span> Reference state<a class="anchor" aria-label="anchor" href="#reference-state-2"><i class="fas fa-link"></i></a>
</h3>
<p>The indicator uses the same reference state as all or most of the indicators developed in this and in similar projects, and is defined in <a href="https://www.regjeringen.no/no/dokumenter/fagsystem-for-fastsetting-av-god-okologisk-tilstand/id2558481/">Nybø et al (2017): Fagsystem for fastsetting av god økologisk tilstand</a>. As glacial extent is primarily, or solely, dependent on climate, we are in a case where we have actual data from the climatic reference period which is the previous normal period 1961-1990.</p>
</div>
<div id="reference-values-thresholds-for-defining-good-ecological-condition-minimum-andor-maximum-values-6" class="section level3" number="15.5.2">
<h3>
<span class="header-section-number">15.5.2</span> Reference values, thresholds for defining <em>good ecological condition</em>, minimum and/or maximum values<a class="anchor" aria-label="anchor" href="#reference-values-thresholds-for-defining-good-ecological-condition-minimum-andor-maximum-values-6"><i class="fas fa-link"></i></a>
</h3>
<p>The reference value is zero change in glacial extent over time. The threshold for defining good ecological condition as set at a 40% reduction in glacial extent, as a default solution. This normalization follows a linear model, although a sigmoidal weibull function might be more appropriate.</p>
<p>The minimum value is set to zero.</p>
</div>
</div>
<div id="uncertainties-7" class="section level2" number="15.6">
<h2>
<span class="header-section-number">15.6</span> Uncertainties<a class="anchor" aria-label="anchor" href="#uncertainties-7"><i class="fas fa-link"></i></a>
</h2>
<p>Here we add a 3% error on each side of the estimates, same as what is reported for the glacier maps from NVE.</p>
</div>
<div id="references-11" class="section level2" number="15.7">
<h2>
<span class="header-section-number">15.7</span> References<a class="anchor" aria-label="anchor" href="#references-11"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>Andreassen, L.M., &amp; Winsvold, S.H. (eds.). 2012. Inventory of Norwegian glaciers. NVE Rapport 38, Norges Vassdrags- og energidirektorat, 236 s</p></li>
<li><p>Andreassen, L.M., Elvehøy, H., Kjøllmoen, B. &amp; Belart, J.M.C. 2020. Glacier change in Norway since the 1960s – an overview of mass balance, area, length and surface elevation changes. Journal of Glaciology 66: 313–328</p></li>
<li><p>Andreassen, L.M., Nagy, T., Kjøllmoen, B. &amp; Leigh, J.R. 2022. A Sentinel-2 based inventory of Norway’s glaciers and ice-marginal lakes 2018/2019. Journal of Glaciology (in review)</p></li>
<li><p>Winsvold, S.H., Andreassen, L.M. &amp; Kienholz, C.. 2014. Glacier area and length changes in Norway from repeat inventories. The Cryosphere 8: 1885-1903</p></li>
</ul>
</div>
<div id="analyses-4" class="section level2" number="15.8">
<h2>
<span class="header-section-number">15.8</span> Analyses<a class="anchor" aria-label="anchor" href="#analyses-4"><i class="fas fa-link"></i></a>
</h2>
<div id="importing-the-data-sets" class="section level3" number="15.8.1">
<h3>
<span class="header-section-number">15.8.1</span> Importing the data sets<a class="anchor" aria-label="anchor" href="#importing-the-data-sets"><i class="fas fa-link"></i></a>
</h3>
<p>There are four data sets:</p>
<ul>
<li>glacial atlas</li>
<li>n50 (the old glacial atlas)</li>
<li>the regional delineation for Norway (fire regions)</li>
<li>an outline of mainland Norway</li>
</ul>
<p>We are assuming all glaciers are found in the mountins, se we do not need to mask the glacial atlas data using an ecosystem delineation map.</p>
<div id="glacial-atlas" class="section level4" number="15.8.1.1">
<h4>
<span class="header-section-number">15.8.1.1</span> Glacial atlas<a class="anchor" aria-label="anchor" href="#glacial-atlas"><i class="fas fa-link"></i></a>
</h4>
<p>This is the new glacial atlas from 2018 and 2019 based on Sentinell (ref. Liss Marie Andreassen, NVE)</p>
<div class="sourceCode" id="cb540"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># server path</span></span>
<span><span class="va">breatlas_path</span> <span class="op">&lt;-</span> <span class="st">'/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp'</span></span>
<span></span>
<span><span class="co"># local path </span></span>
<span><span class="co">#breatlas_path &lt;- 'P:/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp'</span></span>
<span></span>
<span></span>
<span><span class="va">breatlas</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="va">breatlas_path</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `Breatlas_20182019_temp20210922_lma' from data source `/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/breatlas_2018_2019/Breatlas_20182019_temp20210922_lma.shp' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 6915 features and 27 fields (with 4 geometries empty)</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -9874.591 ymin: 6624398 xmax: 810132 ymax: 7836994</span></span>
<span><span class="co">#&gt; Projected CRS: ETRS89 / UTM zone 33N</span></span></code></pre></div>
<p>All maps made in this project need to have the same CRS: EPSG:25833 - ETRS89 / UTM zone 33N.
This one is in UTM 33N ETRS89, even if it is defined in the old Proj.4 way.</p>
<p>There are 6915 polygons. Let’s calculate the area of the polygons and study the distribution of size classes.</p>
<div class="sourceCode" id="cb541"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breatlas</span><span class="op">$</span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fu">st_area</span><span class="op">(</span><span class="va">breatlas</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">breatlas</span><span class="op">$</span><span class="va">area</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">breatlas</span><span class="op">$</span><span class="va">area</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-5-1.png" width="672"></div>
<p>Most polygons are small, and then there are a couple of very big ones. The largest polygon is 50 km2, but note that some polygons are somewhat arbitrarily split.</p>
</div>
<div id="map-of-norway" class="section level4" number="15.8.1.2">
<h4>
<span class="header-section-number">15.8.1.2</span> Map of Norway<a class="anchor" aria-label="anchor" href="#map-of-norway"><i class="fas fa-link"></i></a>
</h4>
<p>This map is stored on the GitHub repository under <em>indicators/data/</em>.</p>
<div class="sourceCode" id="cb542"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nor</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">read_sf</a></span><span class="op">(</span><span class="st">"data/outlineOfNorway_EPSG25833.shp"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, axes<span class="op">=</span><span class="cn">T</span>, main <span class="op">=</span> <span class="st">"Breatlas 2018-2019"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">breatlas</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, border <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
</div>
<div id="n50" class="section level4" number="15.8.1.3">
<h4>
<span class="header-section-number">15.8.1.3</span> N50<a class="anchor" aria-label="anchor" href="#n50"><i class="fas fa-link"></i></a>
</h4>
<p>This is the old glacial extent map. Import it and transform it, same as before.</p>
<div class="sourceCode" id="cb543"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># server path</span></span>
<span><span class="va">n50_path</span> <span class="op">&lt;-</span> <span class="st">'/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp'</span></span>
<span></span>
<span><span class="co"># local path</span></span>
<span><span class="co">#n50_path &lt;- 'P:/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp'</span></span>
<span></span>
<span><span class="va">n50</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="va">n50_path</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">st_transform</span><span class="op">(</span>crs <span class="op">=</span> <span class="fu">crs</span><span class="op">(</span><span class="va">breatlas</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `cryoclim_GAO_NO_1952_1985_UTM_33N' from data source `/data/P-Prosjekter/41201042_okologisk_tilstand_fastlandsnorge_2020_dataanaly/fjell2021/data/breatlas/n50/cryoclim_GAO_NO_1952_1985_UTM_33N.shp' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 7141 features and 30 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -7278.562 ymin: 6623024 xmax: 812207.8 ymax: 7841654</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / UTM zone 33N</span></span></code></pre></div>
<div class="sourceCode" id="cb544"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, axes<span class="op">=</span><span class="cn">T</span>, main <span class="op">=</span> <span class="st">"n50 - 1952-1985"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, border <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-8-1.png" width="672"></div>
<p>Let’s now plot it all on top of each other.</p>
<div class="sourceCode" id="cb545"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># define some boundary boxes for zooming in on specific regions</span></span>
<span><span class="va">myExt</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100000</span>, <span class="fl">6840000</span>, <span class="fl">6900000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">myExt2</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5000</span>, <span class="fl">10000</span>, <span class="fl">6880000</span>, <span class="fl">6885000</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare plotting device with one row, three columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create three maps, each zooming in a bit further.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, axes<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50</span><span class="op">$</span><span class="va">geometry</span>,  border <span class="op">=</span> <span class="st">"orange"</span>, col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"orange"</span>, <span class="fl">1</span><span class="op">)</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">myExt</span>, add<span class="op">=</span><span class="cn">T</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100000</span><span class="op">)</span>,</span>
<span>          ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6840000</span>, <span class="fl">6900000</span><span class="op">)</span>,</span>
<span>          axes<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, col <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">myExt2</span>, add<span class="op">=</span><span class="cn">T</span>, lwd<span class="op">=</span><span class="fl">3</span>, col<span class="op">=</span><span class="st">"orange"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for this last map I plot the old extent in red and the new as grey on top. The red areas still visible will be areas where the glaciers have retreated.        </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5000</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>          ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6880000</span>, <span class="fl">6885000</span><span class="op">)</span>,</span>
<span>     axes<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">breatlas</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, col <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-9-1.png" width="672"></div>
<p>The red areas in the map to the far right is where the ice has retreated for a selected glacier on the west coast.
Now we need to devide the map into regions to then compare the area in n50 with the new glacial extent map <em>breatlas</em>.</p>
</div>
<div id="regions-2" class="section level4" number="15.8.1.4">
<h4>
<span class="header-section-number">15.8.1.4</span> Regions<a class="anchor" aria-label="anchor" href="#regions-2"><i class="fas fa-link"></i></a>
</h4>
<p>Importing a shape file with the regional delineation.</p>
<div class="sourceCode" id="cb546"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg</span> <span class="op">&lt;-</span> <span class="fu">st_read</span><span class="op">(</span><span class="st">"data/regions.shp"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Reading layer `regions' from data source </span></span>
<span><span class="co">#&gt;   `/data/Egenutvikling/41001581_egenutvikling_anders_kolstad/github/ecosystemCondition/data/regions.shp' </span></span>
<span><span class="co">#&gt;   using driver `ESRI Shapefile'</span></span>
<span><span class="co">#&gt; Simple feature collection with 5 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -99551.21 ymin: 6426048 xmax: 1121941 ymax: 7962744</span></span>
<span><span class="co">#&gt; Projected CRS: ETRS89 / UTM zone 33N</span></span>
<span><span class="fu">st_crs</span><span class="op">(</span><span class="va">reg</span><span class="op">)</span></span>
<span><span class="co">#&gt; Coordinate Reference System:</span></span>
<span><span class="co">#&gt;   User input: ETRS89 / UTM zone 33N </span></span>
<span><span class="co">#&gt;   wkt:</span></span>
<span><span class="co">#&gt; PROJCRS["ETRS89 / UTM zone 33N",</span></span>
<span><span class="co">#&gt;     BASEGEOGCRS["ETRS89",</span></span>
<span><span class="co">#&gt;         ENSEMBLE["European Terrestrial Reference System 1989 ensemble",</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1989"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1990"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1991"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1992"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1993"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1994"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1996"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 1997"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 2000"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 2005"],</span></span>
<span><span class="co">#&gt;             MEMBER["European Terrestrial Reference Frame 2014"],</span></span>
<span><span class="co">#&gt;             ELLIPSOID["GRS 1980",6378137,298.257222101,</span></span>
<span><span class="co">#&gt;                 LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;             ENSEMBLEACCURACY[0.1]],</span></span>
<span><span class="co">#&gt;         PRIMEM["Greenwich",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span><span class="co">#&gt;         ID["EPSG",4258]],</span></span>
<span><span class="co">#&gt;     CONVERSION["UTM zone 33N",</span></span>
<span><span class="co">#&gt;         METHOD["Transverse Mercator",</span></span>
<span><span class="co">#&gt;             ID["EPSG",9807]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Latitude of natural origin",0,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8801]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Longitude of natural origin",15,</span></span>
<span><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8802]],</span></span>
<span><span class="co">#&gt;         PARAMETER["Scale factor at natural origin",0.9996,</span></span>
<span><span class="co">#&gt;             SCALEUNIT["unity",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8805]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False easting",500000,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8806]],</span></span>
<span><span class="co">#&gt;         PARAMETER["False northing",0,</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span><span class="co">#&gt;             ID["EPSG",8807]]],</span></span>
<span><span class="co">#&gt;     CS[Cartesian,2],</span></span>
<span><span class="co">#&gt;         AXIS["(E)",east,</span></span>
<span><span class="co">#&gt;             ORDER[1],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;         AXIS["(N)",north,</span></span>
<span><span class="co">#&gt;             ORDER[2],</span></span>
<span><span class="co">#&gt;             LENGTHUNIT["metre",1]],</span></span>
<span><span class="co">#&gt;     USAGE[</span></span>
<span><span class="co">#&gt;         SCOPE["Engineering survey, topographic mapping."],</span></span>
<span><span class="co">#&gt;         AREA["Europe between 12°E and 18°E: Austria; Denmark - offshore and offshore; Germany - onshore and offshore; Norway including Svalbard - onshore and offshore."],</span></span>
<span><span class="co">#&gt;         BBOX[46.4,12,84.42,18]],</span></span>
<span><span class="co">#&gt;     ID["EPSG",25833]]</span></span></code></pre></div>
<p>Let’s plot it to make sure it is correct.</p>
<div class="sourceCode" id="cb547"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, axes<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">reg</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, border <span class="op">=</span> <span class="st">"black"</span>, </span>
<span>       col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, </span>
<span>                             <span class="st">"red"</span>, </span>
<span>                             <span class="st">"green"</span>,</span>
<span>                             <span class="st">"yellow"</span>,</span>
<span>                             <span class="st">"brown"</span><span class="op">)</span>, <span class="fl">.2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-11-1.png" width="672"></div>
<p>Get the region names</p>
<div class="sourceCode" id="cb548"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">reg</span><span class="op">$</span><span class="va">region</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Nord-Norge"      "Midt-Norge"      "Ã\u0098stlandet"</span></span>
<span><span class="co">#&gt; [4] "Vestlandet"      "SÃ¸rlandet"</span></span></code></pre></div>
<p>These are odd. Let me fix the Norwegian letters manually.</p>
<div class="sourceCode" id="cb549"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reg</span><span class="op">$</span><span class="va">region</span><span class="op">[</span><span class="va">reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Ã\u0098stlandet"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Østlandet"</span></span>
<span><span class="va">reg</span><span class="op">$</span><span class="va">region</span><span class="op">[</span><span class="va">reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"SÃ¸rlandet"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Sørlandet"</span></span></code></pre></div>
<p>Before going any further I need to fix a problem with glacier polygons crossing themselves.</p>
<div class="sourceCode" id="cb550"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu">st_is_valid</span><span class="op">(</span><span class="va">breatlas</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; FALSE  TRUE </span></span>
<span><span class="co">#&gt;    68  6847</span></span></code></pre></div>
<p>68 polygons are not valid.
Let’s look at the first four reasons for why that is.</p>
<div class="sourceCode" id="cb551"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu">st_is_valid</span><span class="op">(</span><span class="va">breatlas</span>, reason<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "Valid Geometry"                                       </span></span>
<span><span class="co">#&gt; [2] "Ring Self-intersection[100236.4931 6912507.5864]"     </span></span>
<span><span class="co">#&gt; [3] "Ring Self-intersection[92500.2095999997 6900940.8003]"</span></span>
<span><span class="co">#&gt; [4] "Ring Self-intersection[91965.6612 6883260.4912]"      </span></span>
<span><span class="co">#&gt; [5] "Ring Self-intersection[120595.9254 6853573.4955]"</span></span></code></pre></div>
<p>There is a convinient function to fix this.</p>
<div class="sourceCode" id="cb552"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># requires lwgeom</span></span>
<span><span class="va">breatlas2</span> <span class="op">&lt;-</span> <span class="fu">st_make_valid</span><span class="op">(</span><span class="va">breatlas</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu">st_is_valid</span><span class="op">(</span><span class="va">breatlas2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; TRUE </span></span>
<span><span class="co">#&gt; 6915</span></span>
<span></span>
<span><span class="co"># same result:</span></span>
<span><span class="co">#breatlas2 &lt;- st_buffer(breatlas, 0.0)</span></span>
<span><span class="co">#table(st_is_valid(breatlas2))</span></span></code></pre></div>
<p>Let me plot the new, fixed map on top of the old to see if they match. I give the new valid map a blue transparent colour, and the old map a yellow and transparent colour.</p>
<div class="sourceCode" id="cb553"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5000</span>, <span class="fl">10000</span><span class="op">)</span>,</span>
<span>          ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6880000</span>, <span class="fl">6885000</span><span class="op">)</span>,</span>
<span>     axes<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">breatlas2</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"blue"</span>,<span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">breatlas</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span>, col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"yellow"</span>,<span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-17-1.png" width="672"></div>
<p>This seems to have worked.
Notice also how some of these larger polygons are somewhat arbitrarely divided into several adjoining polygons. This is only so for the new map, not the old n50 map.</p>
<p>Delete the invalid data set.</p>
<div class="sourceCode" id="cb554"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breatlas</span> <span class="op">&lt;-</span> <span class="va">breatlas2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">breatlas2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="glacial-area-per-region" class="section level3" number="15.8.2">
<h3>
<span class="header-section-number">15.8.2</span> Glacial area per region<a class="anchor" aria-label="anchor" href="#glacial-area-per-region"><i class="fas fa-link"></i></a>
</h3>
<div id="contemporary-area" class="section level4" number="15.8.2.1">
<h4>
<span class="header-section-number">15.8.2.1</span> Contemporary area<a class="anchor" aria-label="anchor" href="#contemporary-area"><i class="fas fa-link"></i></a>
</h4>
<p>Here is one method for getting the glacial area for each region.</p>
<div class="sourceCode" id="cb555"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This intersection operation is a bit heavy, so I do it once and store it locally so that I can import it again quickly. </span></span>
<span><span class="co">#brealtas_reg &lt;- st_intersection(breatlas, reg)</span></span>
<span><span class="co">#saveRDS(brealtas_reg, "indicators/data/brealtas_reg_helperfile.rds")</span></span>
<span></span>
<span><span class="co"># Importing what I create above</span></span>
<span><span class="va">brealtas_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"data/brealtas_reg_helperfile.rds"</span><span class="op">)</span></span></code></pre></div>
<p>Checking what happens to polygons that span to regions. Central Norway in red and western Norway in green. 50% transparency means we should get a third colour where and if they overlap.</p>
<div class="sourceCode" id="cb556"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">brealtas_reg</span><span class="op">$</span><span class="va">geometry</span><span class="op">[</span><span class="va">brealtas_reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Midt-Norge"</span><span class="op">]</span>, </span>
<span>    col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"red"</span>,<span class="fl">0.5</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>, axes<span class="op">=</span><span class="cn">T</span>, </span>
<span>     ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6900000</span>, <span class="fl">6905000</span><span class="op">)</span>,</span>
<span>     xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">85000</span>, <span class="fl">100000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">brealtas_reg</span><span class="op">$</span><span class="va">geometry</span><span class="op">[</span><span class="va">brealtas_reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Vestlandet"</span><span class="op">]</span>, </span>
<span>     col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"green"</span>,<span class="fl">0.5</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-20-1.png" width="672"></div>
<p>It worked fine.</p>
<p>Calculating the area of the polygons</p>
<div class="sourceCode" id="cb557"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Calculating the area of the polygons</span></span>
<span><span class="va">brealtas_reg</span><span class="op">$</span><span class="va">area_crop</span> <span class="op">&lt;-</span> <span class="fu">st_area</span><span class="op">(</span><span class="va">brealtas_reg</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># summing the area for each region</span></span>
<span><span class="va">bretabell</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span></span>
<span>       <span class="va">brealtas_reg</span><span class="op">$</span><span class="va">area_crop</span>,</span>
<span>       <span class="va">brealtas_reg</span><span class="op">$</span><span class="va">region</span>,</span>
<span>       FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># converting from m2 to km2</span></span>
<span><span class="va">bretabell</span> <span class="op">&lt;-</span> <span class="va">bretabell</span><span class="op">/</span><span class="fl">1000000</span></span>
<span></span>
<span><span class="co"># plotting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span></span>
<span>  <span class="va">bretabell</span>,</span>
<span>  ylab<span class="op">=</span><span class="st">"Breareal (km2)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-21-1.png" width="672"></div>
<p>Southern Norway has &lt;1km2 of glaciers in 2018-2019.</p>
</div>
<div id="same-for-n50" class="section level4" number="15.8.2.2">
<h4>
<span class="header-section-number">15.8.2.2</span> Same for N50<a class="anchor" aria-label="anchor" href="#same-for-n50"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb558"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n50x</span> <span class="op">&lt;-</span> <span class="fu">st_make_valid</span><span class="op">(</span><span class="va">n50</span><span class="op">)</span></span>
<span><span class="co">#n50_reg &lt;- st_intersection(n50x, reg)</span></span>
<span><span class="co">#saveRDS(n50_reg, "indicators/data/n50_helperfile.rds")</span></span>
<span><span class="va">n50_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="st">"data/n50_helperfile.rds"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb559"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50_reg</span><span class="op">$</span><span class="va">geometry</span><span class="op">[</span><span class="va">n50_reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Midt-Norge"</span><span class="op">]</span>, </span>
<span>    col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"red"</span>,<span class="fl">0.5</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>, axes<span class="op">=</span><span class="cn">T</span>, </span>
<span>     ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6900000</span>, <span class="fl">6905000</span><span class="op">)</span>,</span>
<span>     xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">85000</span>, <span class="fl">100000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">n50_reg</span><span class="op">$</span><span class="va">geometry</span><span class="op">[</span><span class="va">n50_reg</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Vestlandet"</span><span class="op">]</span>, </span>
<span>     col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html">alpha</a></span><span class="op">(</span><span class="st">"green"</span>,<span class="fl">0.5</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">nor</span><span class="op">$</span><span class="va">geometry</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-23-1.png" width="672"></div>
<p>Thats good.
Now I will plot the reference values (n50) and the contemporary data together.</p>
<div class="sourceCode" id="cb560"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n50_reg</span><span class="op">$</span><span class="va">area_crop</span> <span class="op">&lt;-</span> <span class="fu">st_area</span><span class="op">(</span><span class="va">n50_reg</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n50tabell</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tapply.html">tapply</a></span><span class="op">(</span></span>
<span>       <span class="va">n50_reg</span><span class="op">$</span><span class="va">area_crop</span>,</span>
<span>       <span class="va">n50_reg</span><span class="op">$</span><span class="va">region</span>,</span>
<span>       FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span>
<span><span class="va">n50tabell</span> <span class="op">&lt;-</span> <span class="va">n50tabell</span><span class="op">/</span><span class="fl">1000000</span> </span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span></span>
<span>  <span class="va">n50tabell</span>,</span>
<span>  ylab<span class="op">=</span><span class="st">"Breareal (km2)"</span>,</span>
<span>  col<span class="op">=</span><span class="st">"grey"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span></span>
<span>  <span class="va">bretabell</span>,</span>
<span>  ylab<span class="op">=</span><span class="st">"Breareal (km2)"</span>,</span>
<span>  add<span class="op">=</span><span class="cn">T</span>,</span>
<span>  col<span class="op">=</span><span class="st">"grey30"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-24-1.png" width="672"></div>
<p>In the figure above, the glacial area in the reference periond is in light grey and todays area is in dark grey. The height of the light grey bar depicts the reduction in glacial area.</p>
<p>There was a little more glaicers in southern Norway in the reference period, but only 4 km2. The condition here will be very poor! I’m not entirely sure this is representative. The alternative is to set it to be NA, and I think I will do this - one could argue that glaciers are not as important of central to the alpine ecosystems in the south.</p>
</div>
</div>
<div id="scaled-indicator-values-1" class="section level3" number="15.8.3">
<h3>
<span class="header-section-number">15.8.3</span> Scaled indicator values<a class="anchor" aria-label="anchor" href="#scaled-indicator-values-1"><i class="fas fa-link"></i></a>
</h3>
<p>Making a table with the indicator values.</p>
<div class="sourceCode" id="cb561"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myTbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>region           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bretabell</span><span class="op">)</span>,</span>
<span>                indikator        <span class="op">=</span> <span class="va">bretabell</span>,</span>
<span>                referanseverdi   <span class="op">=</span> <span class="va">n50tabell</span><span class="op">)</span></span>
<span><span class="va">myTbl</span><span class="op">$</span><span class="va">skalert_indikator</span> <span class="op">&lt;-</span> <span class="va">myTbl</span><span class="op">$</span><span class="va">indikator</span><span class="op">/</span><span class="va">myTbl</span><span class="op">$</span><span class="va">referanseverdi</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">myTbl</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">region</th>
<th align="right">indikator</th>
<th align="right">referanseverdi</th>
<th align="right">skalert_indikator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Midt-Norge</td>
<td align="right">69.8685069</td>
<td align="right">173.436069</td>
<td align="right">0.4028488</td>
</tr>
<tr class="even">
<td align="left">Nord-Norge</td>
<td align="right">928.5326204</td>
<td align="right">1409.196007</td>
<td align="right">0.6589095</td>
</tr>
<tr class="odd">
<td align="left">Østlandet</td>
<td align="right">251.3490789</td>
<td align="right">365.357472</td>
<td align="right">0.6879538</td>
</tr>
<tr class="even">
<td align="left">Sørlandet</td>
<td align="right">0.7033655</td>
<td align="right">3.739583</td>
<td align="right">0.1880866</td>
</tr>
<tr class="odd">
<td align="left">Vestlandet</td>
<td align="right">1077.9902876</td>
<td align="right">1372.939792</td>
<td align="right">0.7851694</td>
</tr>
</tbody>
</table></div>
<p>Scaling and clipping the regions against the outline of Norway</p>
<div class="sourceCode" id="cb562"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste the scaled indicato values into the shape file with the regions, using the match function to make sure the align correctly</span></span>
<span><span class="va">reg</span><span class="op">$</span><span class="va">skalert_indikator</span> <span class="op">&lt;-</span> <span class="va">myTbl</span><span class="op">$</span><span class="va">skalert_indikator</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">reg</span><span class="op">$</span><span class="va">region</span>, <span class="va">myTbl</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># cutting away the marine areas</span></span>
<span><span class="va">reg_clipped</span> <span class="op">&lt;-</span> <span class="fu">st_intersection</span><span class="op">(</span><span class="va">reg</span>, <span class="va">nor</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially</span></span>
<span><span class="co">#&gt; constant throughout all geometries</span></span></code></pre></div>
<div class="sourceCode" id="cb563"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># round of to 2 decimals</span></span>
<span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">skalert_indikator_r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">skalert_indikator</span>, <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Plotting a static map with scaled indicator values</p>
<div class="sourceCode" id="cb564"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tmap_mode</span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span> <span class="co"># mode 'view' takes a lot longer to render, but looks better</span></span>
<span><span class="co">#&gt; tmap mode set to plotting</span></span>
<span><span class="fu">tm_shape</span><span class="op">(</span><span class="va">reg_clipped</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">tm_polygons</span><span class="op">(</span>col<span class="op">=</span><span class="st">"skalert_indikator"</span>, </span>
<span>              border.col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">tm_text</span><span class="op">(</span><span class="st">"skalert_indikator_r"</span>, size<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">tm_shape</span><span class="op">(</span><span class="va">nor</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">tm_polygons</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span>,border.col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="breareal_files/figure-html/unnamed-chunk-28-1.png" width="672"></div>
<div class="sourceCode" id="cb565"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># removing the value for souther norway</span></span>
<span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">skalert_indikator</span><span class="op">[</span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">region</span><span class="op">==</span><span class="st">"Sørlandet"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p>Calculating total change of glacier extent</p>
<div class="sourceCode" id="cb566"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">bretabell</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n50tabell</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.7003536</span></span></code></pre></div>
<p>We’ve lost 30% of the glacial area over this time.</p>
</div>
<div id="uncertainty-2" class="section level3" number="15.8.4">
<h3>
<span class="header-section-number">15.8.4</span> Uncertainty<a class="anchor" aria-label="anchor" href="#uncertainty-2"><i class="fas fa-link"></i></a>
</h3>
<p>NVE reports a 3% uncertainty with their method. This is interpret as if +- 3% represent a 99.9%CI for the estimate (ca 2 SD).
In the <a href="https://ninanor.github.io/IBECA/areal-av-isbreer.html">original indicator</a> I re-sampled the indicator value 10000 times here, with a 0.015sd, to get a distribution of indicator values. This time I will settle for reporting the sd as a single value below.</p>
</div>
</div>
<div id="prepare-export-1" class="section level2" number="15.9">
<h2>
<span class="header-section-number">15.9</span> Prepare export<a class="anchor" aria-label="anchor" href="#prepare-export-1"><i class="fas fa-link"></i></a>
</h2>
<p>Now I can prepare the final exported data file. It will be a shape file with raw and scaled indicator values, reference reference values, and uncertainties.</p>
<p>The names of the columns are standardised (region, v_YYYY, sd_YYYY, i_YYYY, and reference).</p>
<div class="sourceCode" id="cb567"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">reg_clipped</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "id"                  "region"             </span></span>
<span><span class="co">#&gt; [3] "skalert_indikator"   "GID_0"              </span></span>
<span><span class="co">#&gt; [5] "NAME_0"              "geometry"           </span></span>
<span><span class="co">#&gt; [7] "skalert_indikator_r"</span></span></code></pre></div>
<div class="sourceCode" id="cb568"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste the raw variable estimates</span></span>
<span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">v_2019</span> <span class="op">&lt;-</span> <span class="va">myTbl</span><span class="op">$</span><span class="va">indikator</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">region</span>, <span class="va">myTbl</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">]</span>              </span>
<span></span>
<span><span class="co"># paste the reference values</span></span>
<span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">reference</span> <span class="op">&lt;-</span> <span class="va">myTbl</span><span class="op">$</span><span class="va">referanseverdi</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">region</span>, <span class="va">myTbl</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">]</span>      </span>
<span></span>
<span><span class="co"># add 3% (one-sided) errors (SD=1.5% so that 1.95SD equals about 3%). </span></span>
<span><span class="va">reg_clipped</span><span class="op">$</span><span class="va">sd_2019</span> <span class="op">&lt;-</span> <span class="va">reg_clipped</span><span class="op">$</span><span class="va">v_2019</span><span class="op">*</span><span class="fl">0.015</span></span>
<span>        </span>
<span><span class="co"># subset the shape file to include only the columns of interest, and rename the column with the scaled indicator values, assigning the value to year 2019.</span></span>
<span><span class="va">exp</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">reg_clipped</span>,</span>
<span>                     <span class="va">region</span>,</span>
<span>                     <span class="va">v_2019</span>,</span>
<span>                     <span class="va">sd_2019</span>,</span>
<span>                     <span class="va">reference</span>,</span>
<span>                     i_2019 <span class="op">=</span> <span class="va">skalert_indikator</span>,</span>
<span>                     <span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<div id="eksport-shape-file-final-product" class="section level3" number="15.9.1">
<h3>
<span class="header-section-number">15.9.1</span> Eksport shape file (final product)<a class="anchor" aria-label="anchor" href="#eksport-shape-file-final-product"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb569"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_write.html">st_write</a></span><span class="op">(</span><span class="va">exp</span>, <span class="st">"indicators/indicatorMaps/breareal.shp"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb570"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">exp</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="12%">
<col width="14%">
<col width="13%">
<col width="13%">
<col width="11%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th align="left">region</th>
<th align="right">v_2019</th>
<th align="right">sd_2019</th>
<th align="right">reference</th>
<th align="right">i_2019</th>
<th align="left">geometry</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Nord-Norge</td>
<td align="right">928.5326204</td>
<td align="right">13.92798931</td>
<td align="right">1409.196007</td>
<td align="right">0.6589095</td>
<td align="left">MULTIPOLYGON (((353978.3 72…</td>
</tr>
<tr class="even">
<td align="left">Midt-Norge</td>
<td align="right">69.8685069</td>
<td align="right">1.04802760</td>
<td align="right">173.436069</td>
<td align="right">0.4028488</td>
<td align="left">MULTIPOLYGON (((148280.6 69…</td>
</tr>
<tr class="odd">
<td align="left">Østlandet</td>
<td align="right">251.3490789</td>
<td align="right">3.77023618</td>
<td align="right">365.357472</td>
<td align="right">0.6879538</td>
<td align="left">MULTIPOLYGON (((236668.3 66…</td>
</tr>
<tr class="even">
<td align="left">Vestlandet</td>
<td align="right">1077.9902876</td>
<td align="right">16.16985431</td>
<td align="right">1372.939792</td>
<td align="right">0.7851694</td>
<td align="left">MULTIPOLYGON (((875.0099 64…</td>
</tr>
<tr class="odd">
<td align="left">Sørlandet</td>
<td align="right">0.7033655</td>
<td align="right">0.01055048</td>
<td align="right">3.739583</td>
<td align="right">NA</td>
<td align="left">MULTIPOLYGON (((-4329.09 64…</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="NDVI-indicator-wetland.html"><span class="header-section-number">14</span> NDVI - wetland ecosystems</a></div>
<div class="next"><a href="areal-uten-d%C3%B8d-eller-skadet-r%C3%B8sslyng-i-kystlynghei.html"><span class="header-section-number">16</span> Areal uten død eller skadet røsslyng i kystlynghei</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#areal-av-isbreer"><span class="header-section-number">15</span> Areal av isbreer</a></li>
<li><a class="nav-link" href="#introduction-3"><span class="header-section-number">15.1</span> Introduction</a></li>
<li>
<a class="nav-link" href="#about-the-underlying-data-5"><span class="header-section-number">15.2</span> About the underlying data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#representativity-in-time-and-space-6"><span class="header-section-number">15.2.1</span> Representativity in time and space</a></li>
<li><a class="nav-link" href="#original-units-6"><span class="header-section-number">15.2.2</span> Original units</a></li>
<li><a class="nav-link" href="#temporal-coverage-7"><span class="header-section-number">15.2.3</span> Temporal coverage</a></li>
<li><a class="nav-link" href="#aditional-comments-about-the-dataset-3"><span class="header-section-number">15.2.4</span> Aditional comments about the dataset</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ecosystem-characteristic-7"><span class="header-section-number">15.3</span> Ecosystem characteristic</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#norwegian-standard-4"><span class="header-section-number">15.3.1</span> Norwegian standard</a></li>
<li><a class="nav-link" href="#seea-ect"><span class="header-section-number">15.3.2</span> SEEA ECT</a></li>
</ul>
</li>
<li><a class="nav-link" href="#collinearities-with-other-indicators-10"><span class="header-section-number">15.4</span> Collinearities with other indicators</a></li>
<li>
<a class="nav-link" href="#reference-state-and-values-3"><span class="header-section-number">15.5</span> Reference state and values</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#reference-state-2"><span class="header-section-number">15.5.1</span> Reference state</a></li>
<li><a class="nav-link" href="#reference-values-thresholds-for-defining-good-ecological-condition-minimum-andor-maximum-values-6"><span class="header-section-number">15.5.2</span> Reference values, thresholds for defining good ecological condition, minimum and/or maximum values</a></li>
</ul>
</li>
<li><a class="nav-link" href="#uncertainties-7"><span class="header-section-number">15.6</span> Uncertainties</a></li>
<li><a class="nav-link" href="#references-11"><span class="header-section-number">15.7</span> References</a></li>
<li>
<a class="nav-link" href="#analyses-4"><span class="header-section-number">15.8</span> Analyses</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#importing-the-data-sets"><span class="header-section-number">15.8.1</span> Importing the data sets</a></li>
<li><a class="nav-link" href="#glacial-area-per-region"><span class="header-section-number">15.8.2</span> Glacial area per region</a></li>
<li><a class="nav-link" href="#scaled-indicator-values-1"><span class="header-section-number">15.8.3</span> Scaled indicator values</a></li>
<li><a class="nav-link" href="#uncertainty-2"><span class="header-section-number">15.8.4</span> Uncertainty</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#prepare-export-1"><span class="header-section-number">15.9</span> Prepare export</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#eksport-shape-file-final-product"><span class="header-section-number">15.9.1</span> Eksport shape file (final product)</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/NINAnor/ecosystemCondition/blob/master/breareal.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/NINAnor/ecosystemCondition/edit/master/breareal.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Indicators for Ecosystem Condition in Norway</strong>" was written by Anders L. Kolstad. It was last built on 2023-10-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
